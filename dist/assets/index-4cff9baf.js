import{r as e,a as t,R as n}from"./vendor-79b9f383.js";import{m as r,A as i}from"./animations-f7009316.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var s={exports:{}},a={},o=e,l=Symbol.for("react.element"),c=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,u=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function m(e,t,n){var r,i={},s=null,a=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(a=t.ref),t)h.call(t,r)&&!d.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:l,type:e,key:s,ref:a,props:i,_owner:u.current}}a.Fragment=c,a.jsx=m,a.jsxs=m,s.exports=a;var f=s.exports,p={},g=t;p.createRoot=g.createRoot,p.hydrateRoot=g.hydrateRoot;const y={},v=function(e,t,n){if(!t||0===t.length)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if((e=function(e){return"/"+e}(e))in y)return;y[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(!!n)for(let n=r.length-1;n>=0;n--){const i=r[n];if(i.href===e&&(!t||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${e}"]${i}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})},x=e.memo(({targetDate:t})=>{const n=e.useRef(null),[i,s]=e.useState({days:0,hours:0,minutes:0,seconds:0});e.useEffect(()=>{const e=()=>{const e=+new Date(t)-+new Date;s(e>0?{days:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}:{days:0,hours:0,minutes:0,seconds:0})};return e(),n.current=setInterval(e,1e3),()=>{n.current&&(clearInterval(n.current),n.current=null)}},[t]);const a=[{label:"Dias",value:i.days},{label:"Horas",value:i.hours},{label:"Min",value:i.minutes},{label:"Seg",value:i.seconds}];return f.jsxs("div",{className:"space-y-6",children:[f.jsxs(r.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[f.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-primary text-glow mb-2",style:{fontFamily:"var(--font-chakra-petch), system-ui, sans-serif"},children:"CONTAGEM REGRESSIVA"}),f.jsx("p",{className:"text-text-muted",style:{fontFamily:"var(--font-sans)"},children:"Até segunda-feira, 19 de agosto, às 20h"})]}),f.jsx("div",{className:"flex justify-center gap-4 md:gap-6",children:a.map((e,t)=>f.jsxs(r.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.1*t,duration:.6,type:"spring",stiffness:100},className:"countdown-digit group hover:scale-105 transition-transform duration-300",children:[f.jsx(r.div,{initial:{scale:1.2,opacity:.5},animate:{scale:1,opacity:1},transition:{duration:.3},className:"countdown-number text-red-500",style:{textShadow:"0 0 10px rgba(239, 68, 68, 0.8), 0 0 20px rgba(239, 68, 68, 0.6), 0 0 30px rgba(239, 68, 68, 0.4)"},children:String(e.value).padStart(2,"0")},e.value),f.jsx("div",{className:"countdown-label",children:e.label}),f.jsx("div",{className:"absolute inset-0 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{boxShadow:"0 0 20px rgba(239, 68, 68, 0.5), 0 0 40px rgba(239, 68, 68, 0.3), 0 0 60px rgba(239, 68, 68, 0.1)"}})]},e.label))}),f.jsx(r.div,{animate:{scale:[1,1.1,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex justify-center",children:f.jsx("div",{className:"w-4 h-4 bg-primary rounded-full shadow-lg shadow-primary/50"})}),f.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.8},className:"text-center text-text-muted text-sm max-w-md mx-auto",style:{fontFamily:"var(--font-sans)"},children:"⏰ Após esse prazo, não será possível participar do evento"})]})}),b=()=>f.jsxs("div",{className:"relative",children:[f.jsxs(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8,ease:"easeOut"},className:"video-container relative group",children:[f.jsx("div",{className:"relative aspect-video bg-gradient-to-br from-secondary to-background rounded-2xl overflow-hidden",children:f.jsx("iframe",{id:"panda-1a9c72f3-b5f7-4062-b44e-f43628f61fb8",src:"https://player-vz-857eb61a-4f3.tv.pandavideo.com.br/embed/?v=1a9c72f3-b5f7-4062-b44e-f43628f61fb8",style:{border:"none"},allow:"accelerometer;gyroscope;autoplay;encrypted-media;picture-in-picture",allowFullScreen:!0,width:"100%",height:"100%",fetchpriority:"high",className:"w-full h-full object-cover rounded-2xl"})}),f.jsx(r.div,{animate:{y:[-10,10,-10]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"absolute -top-4 -right-4 w-8 h-8 bg-primary/30 rounded-full backdrop-blur-sm border border-primary/50"}),f.jsx(r.div,{animate:{y:[10,-10,10]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:1},className:"absolute -bottom-4 -left-4 w-6 h-6 bg-purple-500/30 rounded-full backdrop-blur-sm border border-purple-500/50"})]}),f.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.8},className:"mt-6 glass-card p-4 space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-primary-light rounded-full flex items-center justify-center",children:f.jsx("span",{className:"text-background font-bold text-xl",children:"R"})}),f.jsxs("div",{children:[f.jsx("h5",{className:"font-semibold text-text-light",children:"Rodolfo Mori"}),f.jsx("p",{className:"text-sm text-text-muted",children:"Fundador DevClub"})]})]}),f.jsx("p",{className:"text-sm text-text-muted leading-relaxed",children:'"Confira esta mensagem exclusiva sobre o check-in do Bootcamp Programador em 7 Dias. É fundamental que você confirme sua presença para garantir sua vaga!"'}),f.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-muted",children:[f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Disponível"]}),f.jsx("span",{children:"Mensagem importante"}),f.jsx("span",{className:"flex items-center gap-1",children:"🎯 Check-in obrigatório"})]})]}),f.jsx("div",{className:"absolute -inset-20 bg-gradient-to-r from-primary/5 to-purple-500/5 rounded-full blur-3xl -z-10 opacity-50"})]}),w=({text:t,className:n="",delay:i=0,speed:s=50})=>{const[a,o]=e.useState(""),[l,c]=e.useState(!0),[h,u]=e.useState(!1);return e.useEffect(()=>{let e;const n=setTimeout(()=>{let n=0;const r=()=>{n<t.length?(o(t.slice(0,n+1)),n++,e=setTimeout(r,s)):(u(!0),setTimeout(()=>c(!1),1e3))};r()},1e3*i);return()=>{clearTimeout(e),clearTimeout(n)}},[t,i,s]),e.useEffect(()=>{if(!h){const e=setInterval(()=>{c(e=>!e)},500);return()=>clearInterval(e)}},[h]),f.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:i,duration:.5},className:`relative ${n}`,children:[f.jsx("span",{children:a}),f.jsx(r.span,{animate:{opacity:l?1:0},transition:{duration:.1},className:"inline-block w-1 bg-primary ml-1",style:{height:"1em"},children:"|"})]})},C=({name:t,photo:n,onCredentialGenerated:r,shouldGenerate:i})=>{const s=e.useRef(null),a=async()=>{const e=s.current;if(!e)return;const i=e.getContext("2d");e.width=800,e.height=500;const a=i.createLinearGradient(0,0,800,500);a.addColorStop(0,"#020A13"),a.addColorStop(.3,"#0A2E4D"),a.addColorStop(.7,"#020A13"),a.addColorStop(1,"#052033"),i.fillStyle=a,i.fillRect(0,0,800,500),i.fillStyle="rgba(55, 227, 89, 0.05)",i.font="12px monospace";const o=["function transformLife() {","  const knowledge = learn();","  const skills = practice();","  return code + passion;","}","bootcamp.start();","while(learning) {","  grow();","}"];for(let t=0;t<o.length;t++)i.fillText(o[t],20+t%3*250,50+60*t);const l=50,c=50,h=700,u=400,d=i.createLinearGradient(l,c,l,450);if(d.addColorStop(0,"rgba(255, 255, 255, 0.1)"),d.addColorStop(1,"rgba(255, 255, 255, 0.05)"),i.fillStyle=d,i.fillRect(l,c,h,u),i.strokeStyle="rgba(55, 227, 89, 0.3)",i.lineWidth=2,i.strokeRect(l,c,h,u),i.fillStyle="#37E359",i.font="bold 32px Arial",i.fillText("🚀 DEVCLUB",90,110),i.fillStyle="#F8F9FA",i.font="bold 24px Arial",i.fillText("BOOTCAMP PROGRAMADOR",90,150),i.font="bold 24px Arial",i.fillText("EM 7 DIAS",90,180),n)try{const e=new Image;e.crossOrigin="anonymous",e.onload=()=>{const t=570,n=120,r=e.width/e.height;let s,a,o,l;r>1?(a=n,s=n*r,o=t-(s-n)/2,l=90):(s=n,a=n/r,o=t,l=90-(a-n)/2),i.save(),i.beginPath(),i.arc(630,150,60,0,2*Math.PI),i.clip(),i.drawImage(e,o,l,s,a),i.restore(),i.strokeStyle="#37E359",i.lineWidth=3,i.beginPath(),i.arc(630,150,60,0,2*Math.PI),i.stroke(),m()},e.onerror=()=>{m()},e.src=n}catch(f){m()}else{const e=570,t=90,n=120;i.fillStyle="rgba(55, 227, 89, 0.2)",i.beginPath(),i.arc(e+n/2,t+n/2,n/2,0,2*Math.PI),i.fill(),i.fillStyle="#37E359",i.font="60px Arial",i.textAlign="center",i.fillText("👤",e+n/2,t+n/2+20),i.strokeStyle="#37E359",i.lineWidth=3,i.stroke(),m()}function m(){try{i.textAlign="left",i.fillStyle="#F8F9FA",i.font="bold 36px Arial";const n=270;i.fillText(t||"PARTICIPANTE",90,n);const s=Math.floor(1e4*Math.random())+1;i.fillStyle="#37E359",i.font="20px monospace",i.fillText(`ID: #DC2025-${String(s).padStart(4,"0")}`,90,n+40),i.fillStyle="#94A3B8",i.font="bold 18px Arial",i.fillText("19-25 AGOSTO • 2025",90,n+80),i.fillStyle="#37E359",i.font="bold 20px Arial",i.fillText("✅ CONFIRMADO",90,n+120);const a=410,o=i.createLinearGradient(90,a,670,a);o.addColorStop(0,"#37E359"),o.addColorStop(.5,"#52FF74"),o.addColorStop(1,"#37E359"),i.strokeStyle=o,i.lineWidth=4,i.beginPath(),i.moveTo(90,a),i.lineTo(670,a),i.stroke();const l=e.toDataURL("image/png",1);r&&r(l,s)}catch(f){}}};return e.useEffect(()=>{i&&t&&a()},[i,t,n]),f.jsx("canvas",{ref:s,style:{display:"none"},width:800,height:500})},E=({isOpen:e,onClose:t,credentialImage:n,ticketId:s,userName:a})=>{const o=[{name:"LinkedIn",icon:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"currentColor",children:f.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),color:"bg-[#0077B5] hover:bg-[#005885] border border-[#0077B5]/20",action:()=>l()},{name:"Instagram",icon:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"currentColor",children:f.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),color:"bg-gradient-to-br from-[#E4405F] via-[#F77737] to-[#FCAF45] hover:from-[#C13584] hover:via-[#E1306C] hover:to-[#F56040] border border-pink-500/20",action:()=>u()},{name:"Twitter/X",icon:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"currentColor",children:f.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),color:"bg-black hover:bg-gray-800 border border-gray-600/20",action:()=>c()},{name:"WhatsApp",icon:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"currentColor",children:f.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.863 3.488"})}),color:"bg-[#25D366] hover:bg-[#1DA851] border border-green-400/20",action:()=>h()}],l=()=>{const e=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.origin)}&text=${encodeURIComponent("🚀 Acabei de confirmar minha presença no Bootcamp Programador em 7 Dias da DevClub! \n\n7 dias intensivos que podem mudar minha carreira na programação. Do zero ao primeiro emprego como desenvolvedor!\n\n#DevClub #Programação #Bootcamp #CarreiraTech")}`;window.open(e,"_blank","width=600,height=400"),"undefined"!=typeof fbq&&fbq("track","CustomEvent",{event_name:"CredentialShared",platform:"LinkedIn",ticket_id:s,content_name:"Check-in Bootcamp Programador em 7 Dias"})},c=()=>{const e=`https://twitter.com/intent/tweet?text=${encodeURIComponent("🚀 Confirmado no Bootcamp Programador em 7 Dias da @DevClub! \n\n7 dias que podem mudar minha vida profissional 💻✨\n\n#DevClub #Programação #Bootcamp #Tech")}&url=${encodeURIComponent(window.location.origin)}`;window.open(e,"_blank","width=600,height=400"),"undefined"!=typeof fbq&&fbq("track","CustomEvent",{event_name:"CredentialShared",platform:"Twitter",ticket_id:s,content_name:"Check-in Bootcamp Programador em 7 Dias"})},h=()=>{String(s).padStart(4,"0"),window.location.origin;window.open("https://sndflw.com/i/bootcamp-programador-com-ia-em-7-dias-i","_blank"),"undefined"!=typeof fbq&&fbq("track","CustomEvent",{event_name:"CredentialShared",platform:"WhatsApp",ticket_id:s,content_name:"Check-in Bootcamp Programador em 7 Dias"})},u=()=>{var e;if(n){const t=document.createElement("a");t.download=`devclub-ingresso-${(null==(e=null==a?void 0:a.replace(/\s+/g,"-"))?void 0:e.toLowerCase())||"participante"}.png`,t.href=n,document.body.appendChild(t),t.click(),document.body.removeChild(t),"undefined"!=typeof fbq&&fbq("track","CustomEvent",{event_name:"CredentialDownloaded",ticket_id:s,content_name:"Check-in Bootcamp Programador em 7 Dias"})}};return e?f.jsx(i,{children:f.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[f.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),f.jsx(r.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",duration:.5},className:"relative w-full h-full md:max-w-4xl md:h-auto md:mx-4 md:max-h-[90vh] overflow-y-auto scrollbar-hide modal-fullscreen-mobile",onClick:e=>e.stopPropagation(),children:f.jsxs("div",{className:"glass-card p-4 md:p-6 lg:p-8 relative bg-gradient-to-br from-background via-secondary/20 to-background border border-primary/20 shadow-2xl h-full md:h-auto flex flex-col",children:[f.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary via-primary-light to-primary rounded-t-2xl"}),f.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 bg-primary/5 rounded-full blur-3xl animate-pulse"}),f.jsx("div",{className:"absolute bottom-10 left-10 w-24 h-24 bg-blue-500/5 rounded-full blur-2xl animate-pulse",style:{animationDelay:"1s"}}),f.jsx(r.button,{onClick:t,whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute top-4 right-4 w-12 h-12 md:w-10 md:h-10 bg-red-500/20 hover:bg-red-500/30 border-2 border-red-500/30 rounded-full flex items-center justify-center text-red-400 hover:text-red-300 transition-all duration-300 z-10",children:f.jsx("span",{className:"text-lg md:text-base font-bold",children:"✕"})}),f.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-center mb-8 relative",children:[f.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-primary to-primary-light rounded-full"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-primary/20 to-primary-light/20 rounded-full border border-primary/30 mb-6",children:f.jsx("div",{className:"text-4xl animate-bounce",children:"🎉"})}),f.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 pointer-events-none",children:[...Array(6)].map((e,t)=>f.jsx(r.div,{initial:{opacity:0,scale:0,y:0},animate:{opacity:[0,1,0],scale:[0,1,0],y:[-20,-60,-100]},transition:{duration:2,repeat:1/0,delay:.3*t,ease:"easeOut"},className:"absolute w-2 h-2 bg-primary rounded-full",style:{left:12*t-30+"px",top:"10px"}},t))})]}),f.jsx(r.h2,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.6},className:"text-3xl md:text-4xl font-bold text-text-light mb-4 bg-gradient-to-r from-text-light via-primary to-text-light bg-clip-text text-transparent bg-300% animate-gradient-x",children:"🎫 Seu Ingresso foi Gerado!"}),f.jsxs(r.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-lg text-text-muted max-w-2xl mx-auto leading-relaxed",children:["Agora é só compartilhar e se preparar para os"," ",f.jsx("span",{className:"text-primary font-semibold",children:"7 dias que vão transformar sua vida!"}),f.jsx("br",{}),f.jsx("span",{className:"text-sm text-text-muted/80",children:"Sua jornada para se tornar um programador profissional começa aqui 🚀"})]})]}),f.jsx(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:"mb-8 flex justify-center",children:n&&f.jsxs("div",{className:"relative group",children:[f.jsx("img",{src:n,alt:"Credencial do Bootcamp",className:"max-w-full h-auto rounded-lg shadow-2xl border border-primary/20 group-hover:scale-105 transition-transform duration-300",style:{maxHeight:"400px"}}),f.jsx("div",{className:"absolute inset-0 bg-primary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg flex items-center justify-center",children:f.jsx("span",{className:"text-text-light font-semibold",children:"Clique para ampliar"})})]})}),f.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[f.jsxs(r.button,{onClick:u,whileHover:{scale:1.05,boxShadow:"0 10px 25px rgba(55, 227, 89, 0.3)"},whileTap:{scale:.95},className:"inline-flex items-center gap-3 bg-gradient-to-r from-primary to-primary-light hover:from-primary-light hover:to-primary text-background font-semibold text-lg px-8 py-4 rounded-xl transition-all duration-300 group shadow-lg hover:shadow-xl relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 animate-pulse"})}),f.jsx("div",{className:"relative z-10 group-hover:scale-110 transition-transform duration-300",children:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"currentColor",children:f.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),f.jsx("span",{className:"relative z-10",children:"Baixar Imagem"})]}),f.jsxs(r.button,{onClick:async()=>{try{if(n){const e=await fetch(n),t=await e.blob();await navigator.clipboard.write([new ClipboardItem({"image/png":t})]),alert("✅ Imagem copiada para a área de transferência!")}}catch(e){u()}},whileHover:{scale:1.05,boxShadow:"0 10px 25px rgba(255, 255, 255, 0.1)"},whileTap:{scale:.95},className:"inline-flex items-center gap-3 bg-white/10 hover:bg-white/20 border border-white/20 hover:border-primary/30 text-text-light font-semibold text-lg px-8 py-4 rounded-xl transition-all duration-300 group shadow-lg hover:shadow-xl relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 animate-pulse"})}),f.jsx("div",{className:"relative z-10 group-hover:scale-110 transition-transform duration-300",children:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"currentColor",children:f.jsx("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"})})}),f.jsx("span",{className:"relative z-10",children:"Copiar Imagem"})]})]}),f.jsx("div",{className:"text-center",children:f.jsxs(r.button,{onClick:()=>window.open("https://calendar.google.com/calendar/u/0/r/eventedit?text=Bootcamp+Programador+em+7+Dias+-+Aula+1&details=Link+da+call:+https://us06web.zoom.us/j/87985750737?pwd=IY4s28M2H02QTVCBDOcsKFb2Nb1wF1.1&location=https://us06web.zoom.us/j/87985750737?pwd=IY4s28M2H02QTVCBDOcsKFb2Nb1wF1.1&dates=20250819T230000Z/20250820T010000Z","_blank"),whileHover:{scale:1.05,boxShadow:"0 10px 25px rgba(255, 215, 0, 0.3)"},whileTap:{scale:.95},className:"inline-flex items-center gap-3 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-amber-500 hover:to-yellow-500 text-black font-semibold text-lg px-8 py-4 rounded-xl transition-all duration-300 group shadow-lg hover:shadow-xl relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 animate-pulse"})}),f.jsx("div",{className:"relative z-10 group-hover:scale-110 transition-transform duration-300",children:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"currentColor",children:f.jsx("path",{d:"M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V8H19V19Z"})})}),f.jsx("span",{className:"relative z-10",children:"📅 Adicionar Aula 1 à Agenda"})]})}),f.jsxs("div",{className:"text-center",children:[f.jsx("h3",{className:"text-xl font-bold text-text-light mb-4",style:{fontFamily:"var(--font-chakra-petch), system-ui, sans-serif"},children:"Compartilhe nas Redes Sociais"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto",children:o.map((e,t)=>f.jsxs(r.button,{onClick:e.action,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8+.1*t},whileHover:{scale:1.05,boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},whileTap:{scale:.95},className:`\n                        ${e.color} text-white font-semibold\n                        p-6 rounded-2xl transition-all duration-300\n                        flex flex-col items-center gap-3 group\n                        shadow-lg hover:shadow-xl backdrop-blur-sm\n                        relative overflow-hidden\n                      `,children:[f.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 animate-pulse"})}),f.jsx("div",{className:"relative z-10 p-2 bg-white/10 rounded-xl group-hover:bg-white/20 transition-all duration-300 group-hover:scale-110",children:e.icon}),f.jsx("span",{className:"text-sm font-bold relative z-10 group-hover:text-white transition-colors duration-300",children:e.name})]},e.name))})]}),f.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"bg-gradient-to-br from-primary/10 via-primary/5 to-primary/10 border border-primary/20 rounded-2xl p-8 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-blue-500/5 rounded-full blur-2xl"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[f.jsx("div",{className:"p-3 bg-primary/20 rounded-xl",children:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-primary",fill:"currentColor",children:f.jsx("path",{d:"M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"})})}),f.jsx("h4",{className:"text-2xl font-bold text-text-light",style:{fontFamily:"var(--font-chakra-petch), system-ui, sans-serif"},children:"Dicas de Compartilhamento"})]}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"glass-card p-4 bg-gradient-to-br from-pink-500/10 to-purple-500/10 border border-pink-500/20",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx("div",{className:"p-2 bg-gradient-to-br from-pink-500/20 to-purple-500/20 rounded-lg",children:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 text-pink-400",fill:"currentColor",children:f.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),f.jsx("h5",{className:"font-bold text-text-light",children:"Instagram"})]}),f.jsxs("ul",{className:"text-sm text-text-muted space-y-1",children:[f.jsx("li",{children:"• Baixe a imagem e poste no feed"}),f.jsx("li",{children:"• Use nos stories com #DevClub"}),f.jsx("li",{children:"• Marque @devclub.oficial"})]})]}),f.jsxs("div",{className:"glass-card p-4 bg-gradient-to-br from-blue-500/10 to-blue-600/10 border border-blue-500/20",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 text-blue-400",fill:"currentColor",children:f.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),f.jsx("h5",{className:"font-bold text-text-light",children:"LinkedIn"})]}),f.jsxs("ul",{className:"text-sm text-text-muted space-y-1",children:[f.jsx("li",{children:"• Compartilhe no seu perfil"}),f.jsx("li",{children:"• Use hashtags #DevClub #Tech"}),f.jsx("li",{children:"• Conecte com outros dev"})]})]}),f.jsxs("div",{className:"glass-card p-4 bg-gradient-to-br from-green-500/10 to-green-600/10 border border-green-500/20",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 text-green-400",fill:"currentColor",children:f.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.863 3.488"})})}),f.jsx("h5",{className:"font-bold text-text-light",children:"WhatsApp"})]}),f.jsxs("ul",{className:"text-sm text-text-muted space-y-1",children:[f.jsx("li",{children:"• Envie para amigos interessados"}),f.jsx("li",{children:"• Compartilhe em grupos de tech"}),f.jsx("li",{children:"• Convide para estudar junto"})]})]}),f.jsxs("div",{className:"glass-card p-4 bg-gradient-to-br from-gray-600/10 to-gray-800/10 border border-gray-500/20",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx("div",{className:"p-2 bg-gray-600/20 rounded-lg",children:f.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 text-gray-300",fill:"currentColor",children:f.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),f.jsx("h5",{className:"font-bold text-text-light",children:"Twitter/X"})]}),f.jsxs("ul",{className:"text-sm text-text-muted space-y-1",children:[f.jsx("li",{children:"• Thread com sua jornada"}),f.jsx("li",{children:"• Retweet com comentário"}),f.jsx("li",{children:"• Use #DevClub #100DaysOfCode"})]})]})]}),f.jsxs("div",{className:"mt-6 text-center p-4 bg-primary/10 rounded-xl border border-primary/20",children:[f.jsx("p",{className:"text-text-light font-semibold mb-2",children:"🎯 Quanto mais você compartilhar, mais pessoas você pode inspirar!"}),f.jsx("p",{className:"text-sm text-text-muted",children:"Sua credencial pode ser o empurrão que alguém precisa para mudar de vida através da programação."})]}),f.jsx("div",{className:"mt-8 text-center",children:f.jsx(r.button,{onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-8 py-4 bg-gradient-to-r from-primary to-primary-light hover:from-primary-light hover:to-primary text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border border-primary/30",children:"✨ Finalizar Check-in"})})]})]})]})]})})]})}):null},_=({onComplete:t,playSuccessSound:n,isActive:r})=>{const[i,s]=e.useState(3),[a,o]=e.useState(!0),[l,c]=e.useState(!1);e.useEffect(()=>{if(!r)return;const e=setInterval(()=>{s(t=>t<=1?(clearInterval(e),window.open("https://sndflw.com/i/bootcamp-programador-com-ia-em-7-dias-i","_blank"),o(!1),0):t-1)},1e3);return()=>clearInterval(e)},[r]);const h=()=>{c(!l)};return a?f.jsx("div",{className:"mb-4 p-6 glass-card",children:f.jsx("div",{className:"space-y-4",children:f.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-6",children:f.jsxs("div",{className:"text-center space-y-3",children:[f.jsx("div",{className:"text-4xl animate-pulse",children:"💬"}),f.jsx("p",{className:"text-text-light font-medium",children:"Entre no grupo do WhatsApp"}),f.jsx("div",{className:"text-3xl font-bold text-green-500",children:i}),f.jsx("p",{className:"text-text-muted text-sm",children:"Redirecionando automaticamente..."})]})})})}):f.jsx("div",{className:"mb-4 p-6 glass-card",children:f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h4",{className:"text-lg font-semibold text-text-light mb-2",children:"💬 Entrar no Grupo do WhatsApp"}),f.jsx("p",{className:"text-text-muted text-sm mb-7",children:"O link do WhatsApp foi aberto em uma nova aba"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",onClick:h,children:[f.jsx("input",{type:"checkbox",checked:l,onChange:h,className:"w-5 h-5 text-primary bg-transparent border-2 border-primary/30 rounded focus:ring-primary/50 focus:ring-2 cursor-pointer"}),f.jsx("label",{className:"text-text-light text-sm cursor-pointer flex-1",children:"Já entrei no grupo do WhatsApp"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-text-muted text-sm mb-2",children:"Link do Grupo:"}),f.jsx("a",{href:"https://sndflw.com/i/bootcamp-programador-com-ia-em-7-dias-i",target:"_blank",rel:"noopener noreferrer",className:"text-green-500 hover:text-green-400 underline text-sm",children:"Abrir WhatsApp novamente"})]}),f.jsx("div",{className:"text-center",children:f.jsx("button",{onClick:()=>{l?(t(),n()):alert("Por favor, confirme que você entrou no grupo do WhatsApp")},disabled:!l,className:"px-8 py-3 font-semibold rounded-lg transition-colors duration-200 "+(l?"bg-primary hover:bg-primary-light text-white":"bg-gray-500/50 text-gray-400 cursor-not-allowed"),children:"Continuar"})})]})]})})})},N="https://script.google.com/macros/s/AKfycbxNu3p8f_O5ZxmRqNqXjPe8rF3O3iLvLVLRjO8x5vCqgKCEQJEOBQFoGzNxvVAZm8FJ/exec",T=(e,t)=>({recording:{yes:"SIM, quero a gravação vitalícia",no:"NÃO, não quero",no_thanks:"Confirmo que quero fazer o check-in e NÃO quero aproveitar a oportunidade de ter a gravação vitalícia",already_purchased:"SIM (Já garanti a gravação vitalícia)"},code:{yes:"SIM, quero o código completo",no:"NÃO, não quero",no_thanks:"Confirmo que quero fazer o check-in e NÃO quero aproveitar a oportunidade de ter o código completo",already_purchased:"SIM (Já garanti o código completo)"}}[t][e]||e||"Não respondido"),S=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},I={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,h=(3&t)<<4|a>>4;let u=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(u=64)),r.push(n[c],n[h],n[u],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(S(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new A;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class A extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k=function(e){return function(e){const t=S(e);return I.encodeByteArray(t,!0)}(e).replace(/\./g,"")};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const j=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,D=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&function(e){try{return I.decodeString(e,!0)}catch(n){}return null}(e[1]);return t&&JSON.parse(t)},O=()=>{try{return j()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e={}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||D()}catch(e){return}},R=e=>{const t=(e=>{var t,n;return null==(n=null==(t=O())?void 0:t.emulatorHosts)?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},M=()=>{var e;return null==(e=O())?void 0:e.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class L{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}const V={};let F=!1;function B(e,t){if("undefined"==typeof window||"undefined"==typeof document||!P(window.location.host)||V[e]===t||V[e]||F)return;function n(e){return`__firebase__banner__${e}`}V[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(V))V[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{F=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),h=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(h,c),t.append(h,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",h.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(h.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(){return!function(){var e;const t=null==(e=O())?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class z extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,q.prototype.create)}}class q{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace($,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new z(r,a,n)}}const $=/\{\$([^}]+)}/g;function H(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(G(n)&&G(s)){if(!H(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function G(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e){return e&&e._delegate?e._delegate:e}class W{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new L;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=(null==e?void 0:e.optional)??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:Q})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=Q){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Q){return this.instances.has(e)}getOptions(e=Q){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Q?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}var r;return n||null}normalizeInstanceIdentifier(e=Q){return this.component?this.component.multipleInstances?e:Q:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class J{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new X(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y,Z;(Z=Y||(Y={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT";const ee={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},te=Y.INFO,ne={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},re=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!ne[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ie{constructor(e){this.name=e,this._logLevel=te,this._logHandler=re,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Y))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ee[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...e),this._logHandler(this,Y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...e),this._logHandler(this,Y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...e),this._logHandler(this,Y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...e),this._logHandler(this,Y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...e),this._logHandler(this,Y.ERROR,...e)}}let se,ae;const oe=new WeakMap,le=new WeakMap,ce=new WeakMap,he=new WeakMap,ue=new WeakMap;let de={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return le.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ce.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pe(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function me(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ge(this),t),pe(oe.get(this))}:function(...t){return pe(e.apply(ge(this),t))}:function(t,...n){const r=e.call(ge(this),t,...n);return ce.set(r,t.sort?t.sort():[t]),pe(r)}}function fe(e){return"function"==typeof e?me(e):(e instanceof IDBTransaction&&function(e){if(le.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});le.set(e,t)}(e),t=e,(se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,de):e);var t}function pe(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(pe(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&oe.set(t,e)}).catch(()=>{}),ue.set(t,e),t}(e);if(he.has(e))return he.get(e);const t=fe(e);return t!==e&&(he.set(e,t),ue.set(t,e)),t}const ge=e=>ue.get(e);const ye=["get","getKey","getAll","getAllKeys","count"],ve=["put","add","delete","clear"],xe=new Map;function be(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(xe.get(t))return xe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ve.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ye.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return xe.set(t,s),s}de=(e=>({...e,get:(t,n,r)=>be(t,n)||e.get(t,n,r),has:(t,n)=>!!be(t,n)||e.has(t,n)}))(de);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class we{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Ce="@firebase/app",Ee="0.14.0",_e=new ie("@firebase/app"),Ne="@firebase/app-compat",Te="@firebase/analytics-compat",Se="@firebase/analytics",Ie="@firebase/app-check-compat",Ae="@firebase/app-check",ke="@firebase/auth",je="@firebase/auth-compat",De="@firebase/database",Oe="@firebase/data-connect",Re="@firebase/database-compat",Me="@firebase/functions",Le="@firebase/functions-compat",Pe="@firebase/installations",Ve="@firebase/installations-compat",Fe="@firebase/messaging",Be="@firebase/messaging-compat",Ue="@firebase/performance",ze="@firebase/performance-compat",qe="@firebase/remote-config",$e="@firebase/remote-config-compat",He="@firebase/storage",Ge="@firebase/storage-compat",Ke="@firebase/firestore",We="@firebase/ai",Qe="@firebase/firestore-compat",Xe="firebase",Je="[DEFAULT]",Ye={[Ce]:"fire-core",[Ne]:"fire-core-compat",[Se]:"fire-analytics",[Te]:"fire-analytics-compat",[Ae]:"fire-app-check",[Ie]:"fire-app-check-compat",[ke]:"fire-auth",[je]:"fire-auth-compat",[De]:"fire-rtdb",[Oe]:"fire-data-connect",[Re]:"fire-rtdb-compat",[Me]:"fire-fn",[Le]:"fire-fn-compat",[Pe]:"fire-iid",[Ve]:"fire-iid-compat",[Fe]:"fire-fcm",[Be]:"fire-fcm-compat",[Ue]:"fire-perf",[ze]:"fire-perf-compat",[qe]:"fire-rc",[$e]:"fire-rc-compat",[He]:"fire-gcs",[Ge]:"fire-gcs-compat",[Ke]:"fire-fst",[Qe]:"fire-fst-compat",[We]:"fire-vertex","fire-js":"fire-js",[Xe]:"fire-js-all"},Ze=new Map,et=new Map,tt=new Map;function nt(e,t){try{e.container.addComponent(t)}catch(n){_e.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function rt(e){const t=e.name;if(tt.has(t))return _e.debug(`There were multiple attempts to register component ${t}.`),!1;tt.set(t,e);for(const n of Ze.values())nt(n,e);for(const n of et.values())nt(n,e);return!0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const it=new q("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class st{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new W("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw it.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r={name:Je,automaticDataCollectionEnabled:!0,...t},i=r.name;if("string"!=typeof i||!i)throw it.create("bad-app-name",{appName:String(i)});if(n||(n=M()),!n)throw it.create("no-options");const s=Ze.get(i);if(s){if(H(n,s.options)&&H(r,s.config))return s;throw it.create("duplicate-app",{appName:i})}const a=new J(i);for(const l of tt.values())a.addComponent(l);const o=new st(n,r,a);return Ze.set(i,o),o}function ot(e,t,n){let r=Ye[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void _e.warn(e.join(" "))}rt(new W(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="firebase-heartbeat-store";let ct=null;function ht(){return ct||(ct=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=pe(a);return r&&a.addEventListener("upgradeneeded",e=>{r(pe(a.result),e.oldVersion,e.newVersion,pe(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(lt)}catch(n){}}}).catch(e=>{throw it.create("idb-open",{originalErrorMessage:e.message})})),ct}async function ut(e,t){try{const n=(await ht()).transaction(lt,"readwrite"),r=n.objectStore(lt);await r.put(t,dt(e)),await n.done}catch(n){if(n instanceof z)_e.warn(n.message);else{const e=it.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});_e.warn(e.message)}}}function dt(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ft();if(null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){_e.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ft(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),gt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=k(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return _e.warn(t),""}}}function ft(){return(new Date).toISOString().substring(0,10)}class pt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ht()).transaction(lt),n=await t.objectStore(lt).get(dt(e));return await t.done,n}catch(t){if(t instanceof z)_e.warn(t.message);else{const e=it.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});_e.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ut(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ut(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function gt(e){return k(JSON.stringify({version:2,heartbeats:e})).length}var yt;yt="",rt(new W("platform-logger",e=>new we(e),"PRIVATE")),rt(new W("heartbeat",e=>new mt(e),"PRIVATE")),ot(Ce,Ee,yt),ot(Ce,Ee,"esm2020"),ot("fire-js","");var vt,xt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function h(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function u(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function m(e,t){return e.add(d(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(h(t))throw Error("division by zero");if(h(e))return new p(o,o);if(u(e))return t=g(d(e),t),new p(d(t.g),d(t.h));if(u(t))return t=g(e,d(t)),new p(d(t.g),t.h);if(30<e.g.length){if(u(e)||u(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!h(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=m(e,i.j(t)),new p(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);u(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);h(s)&&(s=l),i=i.add(s),e=m(e,c)}return new p(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(u(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(h(this))return"0";if(u(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=m(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(h(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return u(e=m(this,e))?-1:h(e)?0:1},e.abs=function(){return u(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(h(this)||h(e))return o;if(u(this))return u(e)?d(this).j(d(e)):d(d(this).j(e));if(u(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,m=65535&this.i(i),p=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=m*g,f(n,2*i+2*s),n[2*i+2*s+1]+=l*g,f(n,2*i+2*s+1),n[2*i+2*s+1]+=m*p,f(n,2*i+2*s+1),n[2*i+2*s+2]+=l*p,f(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},vt=r}).apply(void 0!==xt?xt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var bt,wt,Ct,Et,_t,Nt,Tt,St,It="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof It&&It];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function h(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==p().indexOf("Gecko")||-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge")||-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE")||-1!=p().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function C(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout(()=>{throw e},0)}function _(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let S,I=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},k=()=>{const e=i.Promise.resolve(void 0);S=()=>{e.then(j)}};var j=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(n){E(n)}var t=N;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function D(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}u(M,O);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var P="closure_listenable_"+(1e6*Math.random()|0),V=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++V,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function U(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}U.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=q(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),H={};function G(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[P]?e.K(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[$]=l=new U(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Y;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[P]?e.L(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[P]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(B(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[P])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[$]=null)):B(e)}}}function J(e){return e in H?H[e]:H[e]="on"+e}function Y(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof U?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"==typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new U(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;w(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&z(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ne,D),ne.prototype[P]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}u(le,D);var ce=[];function he(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),he(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=i.JSON.stringify,de=i.JSON.parse,me=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function xe(){O.call(this,"c")}u(ve,O),u(xe,O);var be={},we=null;function Ce(){return we=we||new ne}function Ee(e){O.call(this,be.La,e)}function _e(e){const t=Ce();re(t,new Ee(t))}function Ne(e,t){O.call(this,be.STAT_EVENT,e),this.stat=t}function Te(e){const t=Ce();re(t,new Ne(t,e))}function Se(e,t){O.call(this,be.Ma,e),this.size=t}function Ie(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ae(){this.g=!0}function ke(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return ue(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",u(Ee,O),be.STAT_EVENT="statevent",u(Ne,O),be.Ma="timingevent",u(Se,O),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var je,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}u(Re,fe),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},je=new Re;var Pe={},Ve={};function Fe(e,t,n){e.L=1,e.v=ut(at(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),qe(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Rt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=Cn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=G(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var h=c[0];c=c[1];var u=h.split("_");a=2<=u.length&&"type"==u[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ve:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?Ve:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||yn(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,he(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(h){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;gn(n),an(n)}mn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Ye(n.h)&&n.ca){try{n.ca()}catch(h){}n.ca=void 0}}else xn(n,11)}else if((e.K||n.g==e)&&gn(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(r=1.5*h,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ht(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=wn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(He(o),qe(o)),r.g=a}else dn(r);0<n.i.length&&ln(n)}else"stop"!=c[0]&&"close"!=c[0]||xn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?xn(n,7):sn(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}_e()}catch(h){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==en(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const d=en(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||tn(this.g)))){this.J||4!=d||7==t||_e(),He(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=tn(this.g);e="";var s=r.length,a=4==en(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ke(this),Ge(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var h=l;break t}}h=null}if(!(n=h)){this.o=!1,this.s=3,Te(12),Ke(this),Ge(this);break e}ke(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=ze(this,o),e==Ve){4==d&&(this.s=4,Te(14),n=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}if(e==Pe){this.s=4,Te(15),ke(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}ke(this.i,this.l,e,null),We(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),fn(u),u.M=!0,Te(11))}}else ke(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),Ge(this)}else ke(this.i,this.l,o,null),We(this,o);4==d&&Ke(this),this.o&&!this.J&&(4==d?yn(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=en(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=C(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ke(this),Ge(this)}}}catch(d){}},Me.prototype.cancel=function(){this.J=!0,Ke(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(_e(),Te(17)),Ke(this),this.s=2,Ge(this)):$e(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ye(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new kt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new kt(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof kt?(e.i=t,function(e,t){t&&!e.j&&(jt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Dt(this,t),Rt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=mt(t,xt)),e.i=new kt(t,e.h))}function ht(e,t,n){e.i.set(t,n)}function ut(e){return ht(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function mt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(mt(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(mt(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(mt(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",mt(n,At)),e.join("")};var pt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,xt=/[#\?@]/g,At=/#/g;function kt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Dt(e,t){jt(e),t=Mt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ot(e,t){return jt(e),t=Mt(e,t),e.g.has(t)}function Rt(e,t,n){Dt(e,t),0<n.length&&(e.i=null,e.g.set(Mt(e,t),d(n)),e.h+=n.length)}function Mt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Lt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Pt(){this.g=new me}function Vt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;a(e)&&(i=ue(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ft(e){this.l=e.Ub||null,this.j=e.eb||!1}function Bt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ut(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function zt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,qt(e)}function qt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function $t(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ht(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=$t(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ht(e,t,n))}function Gt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=kt.prototype).add=function(e,t){jt(this),this.i=null,e=Mt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){jt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){jt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){jt(this);let t=[];if("string"==typeof e)Ot(this,e)&&(t=t.concat(this.g.get(Mt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return jt(this),this.i=null,Ot(this,e=Mt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},u(Ft,fe),Ft.prototype.g=function(){return new Bt(this.l,this.j)},Ft.prototype.i=(pt={},function(){return pt}),u(Bt,ne),(e=Bt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,qt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qt(this)),this.g&&(this.readyState=3,qt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ut(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?zt(this):qt(this),3==this.readyState&&Ut(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,zt(this))},e.Qa=function(e){this.g&&(this.response=e,zt(this))},e.ga=function(){this.g&&zt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Bt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Gt,ne);var Kt=/^https?$/i,Wt=["POST","PUT"];function Qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),Yt(e)}function Xt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Jt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=en(e)||2!=e.Z()))if(e.u&&4==en(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==en(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Kt.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<en(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Xt(e)}}finally{Yt(e)}}}function Yt(e,t){if(e.g){Zt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Zt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function en(e){return e.g?e.g.readyState:0}function tn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function nn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function rn(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nn("baseRetryDelayMs",5e3,e),this.cb=nn("retryDelaySeedMs",1e4,e),this.Wa=nn("forwardChannelMaxRetries",2,e),this.wa=nn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Pt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function sn(e){if(on(e),3==e.G){var t=e.U++,n=at(e.I);if(ht(n,"SID",e.K),ht(n,"RID",t),ht(n,"TYPE","terminate"),hn(e,n),(t=new Me(e,e.j,t)).L=2,t.v=ut(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=Cn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}bn(e)}function an(e){e.g&&(fn(e),e.g.cancel(),e.g=null)}function on(e){an(e),e.u&&(i.clearTimeout(e.u),e.u=null),gn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function ln(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;S||k(),I||(S(),I=!0),A.add(t,e),e.B=0}}function cn(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ht(r,"SID",e.K),ht(r,"RID",n),ht(r,"AID",e.T),hn(e,r),e.m&&e.o&&Ht(r,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=un(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function hn(e,t){e.H&&v(e.H,function(e,n){ht(t,n,e)}),e.l&&rt({},function(e,n){ht(t,n,e)})}function un(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{Vt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function dn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;S||k(),I||(S(),I=!0),A.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),vn(e,e.v)),e.v++,!0)}function fn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function pn(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ht(t,"RID","rpc"),ht(t,"SID",e.K),ht(t,"AID",e.T),ht(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ht(t,"TO",e.ja),ht(t,"TYPE","xmlhttp"),hn(e,t),e.m&&e.o&&Ht(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ut(at(t)),n.m=null,n.P=!0,Be(n,e)}function gn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){gn(e),fn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ce(),new Se(r,n)),ln(e)}else dn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ye(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Ie(c(e.Ga,e,t),vn(e,e.B)),e.B++,0)))}(e,t)||2==r&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:xn(e,5);break;case 4:xn(e,10);break;case 3:xn(e,6);break;default:xn(e,2)}}function vn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function xn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),ut(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=h(Lt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=h(Lt,n,"TestLoadImage: error",!1,t,r),r.onabort=h(Lt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=h(Lt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout(()=>{n.abort(),Lt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Lt(0,0,!0,t):Lt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Lt(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),bn(e),on(e)}function bn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(m(e.ka,t),m(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function wn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ht(r,n,t),ht(r,"VER",e.la),hn(e,r),r}function Cn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new Ft({eb:n})):new Gt(e.pa)).Ha(e.J),t}function En(){}function _n(){}function Nn(e,t){ne.call(this),this.g=new rn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new In(this)}function Tn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Sn(){xe.call(this),this.status=1}function In(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?pe(this.o):pe(je),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Qt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Wt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Qt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Yt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yt(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<en(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=rn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=wn(this,null,this.W),ln(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=x(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=un(this,i,t),ht(n=at(this.I),"RID",e),ht(n,"CVER",22),this.D&&ht(n,"X-HTTP-Session-Id",this.D),hn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String($t(s)))+"&"+t:this.m&&Ht(n,this.m,s)),et(this.h,i),this.Ua&&ht(n,"TYPE","init"),this.P?(ht(n,"$req",t),ht(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?cn(this,e):0==this.i.length||Je(this.h)||cn(this))},e.Fa=function(){if(this.u=null,pn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),an(this),pn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),mn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=En.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},_n.prototype.g=function(e,t){return new Nn(e,t)},u(Nn,ne),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){sn(this.g)},Nn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&ln(t)},Nn.prototype.N=function(){this.g.l=null,delete this.j,sn(this.g),delete this.g,Nn.aa.N.call(this)},u(Tn,ve),u(Sn,xe),u(In,En),In.prototype.ua=function(){re(this.g,"a")},In.prototype.ta=function(e){re(this.g,new Tn(e))},In.prototype.sa=function(e){re(this.g,new Sn)},In.prototype.ra=function(){re(this.g,"b")},_n.prototype.createWebChannel=_n.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,St=function(){return new _n},Tt=function(){return Ce()},Nt=be,_t={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Et=De,Oe.COMPLETE="complete",Ct=Oe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,wt=ge,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,bt=Gt}).apply(void 0!==It?It:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const At="@firebase/firestore",kt="4.9.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Dt="12.0.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot=new ie("@firebase/firestore");function Rt(){return Ot.logLevel}function Mt(e,...t){if(Ot.logLevel<=Y.DEBUG){const n=t.map(Vt);Ot.debug(`Firestore (${Dt}): ${e}`,...n)}}function Lt(e,...t){if(Ot.logLevel<=Y.ERROR){const n=t.map(Vt);Ot.error(`Firestore (${Dt}): ${e}`,...n)}}function Pt(e,...t){if(Ot.logLevel<=Y.WARN){const n=t.map(Vt);Ot.warn(`Firestore (${Dt}): ${e}`,...n)}}function Vt(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Bt(e,r,n)}function Bt(e,t,n){let r=`FIRESTORE (${Dt}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(i){r+=" CONTEXT: "+n}throw Lt(r),new Error(r)}function Ut(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Bt(t,i,r)}function zt(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $t extends z{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jt.UNAUTHENTICATED))}shutdown(){}}class Wt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qt{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ut(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ht;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ht,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ht)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ut("string"==typeof t.accessToken,31837,{l:t}),new Gt(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ut(null===e||"string"==typeof e,2055,{h:e}),new jt(e)}}class Xt{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Jt{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Xt(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zt{constructor(e,t){var n;this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!=(n=e)&&void 0!==n.settings&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ut(void 0===this.o,3512);const n=e=>{null!=e.error&&Mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Mt("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Yt(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ut("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Yt(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=en(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function nn(e,t){return e<t?-1:e>t?1:0}function rn(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return on(n)===on(i)?nn(n,i):on(n)?1:-1}return nn(e.length,t.length)}const sn=55296,an=57343;function on(e){const t=e.charCodeAt(0);return t>=sn&&t<=an}function ln(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="__name__";class hn{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ft(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ft(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===hn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=hn.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return nn(e.length,t.length)}static compareSegments(e,t){const n=hn.isNumericId(e),r=hn.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?hn.extractNumericId(e).compare(hn.extractNumericId(t)):rn(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vt.fromString(e.substring(4,e.length-2))}}class un extends hn{construct(e,t,n){return new un(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new $t(qt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new un(t)}static emptyPath(){return new un([])}}const dn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends hn{construct(e,t,n){return new mn(e,t,n)}static isValidIdentifier(e){return dn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===cn}static keyField(){return new mn([cn])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new $t(qt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new $t(qt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new $t(qt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new $t(qt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(t)}static emptyPath(){return new mn([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.path=e}static fromPath(e){return new fn(un.fromString(e))}static fromName(e){return new fn(un.fromString(e).popFirst(5))}static empty(){return new fn(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fn(new un(e.slice()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(e,t,n){if(!n)throw new $t(qt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gn(e){if(!fn.isDocumentKey(e))throw new $t(qt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function yn(e){if(fn.isDocumentKey(e))throw new $t(qt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vn(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function xn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Ft(12329,{type:typeof e})}function bn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new $t(qt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xn(e);throw new $t(qt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(e,t){const n={typeString:e};return t&&(n.value=t),n}function Cn(e,t){if(!vn(e))throw new $t(qt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new $t(qt.INVALID_ARGUMENT,n);return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En=-62135596800,_n=1e6;class Nn{static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*_n);return new Nn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $t(qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $t(qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<En)throw new $t(qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $t(qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_n}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cn(e,Nn._jsonSchema))return new Nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-En;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nn._jsonSchemaVersion="firestore/timestamp/1.0",Nn._jsonSchema={type:wn("string",Nn._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tn{static fromTimestamp(e){return new Tn(e)}static min(){return new Tn(new Nn(0,0))}static max(){return new Tn(new Nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(e){return new In(e.readTime,e.key,-1)}class In{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new In(Tn.min(),fn.empty(),-1)}static max(){return new In(Tn.max(),fn.empty(),-1)}}function An(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=fn.comparator(e.documentKey,t.documentKey),0!==n?n:nn(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class kn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jn(e){if(e.code!==qt.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;Mt("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Dn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Dn?t:Dn.resolve(t)}catch(t){return Dn.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Dn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Dn.reject(t)}static resolve(e){return new Dn((t,n)=>{t(e)})}static reject(e){return new Dn((t,n)=>{n(e)})}static waitFor(e){return new Dn((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Dn.resolve(!1);for(const n of e)t=t.next(e=>e?Dn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Dn((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Dn((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function On(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rn.ce=-1;function Mn(e){return null==e}function Ln(e){return 0===e&&1/e==-1/0}function Pn(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function Vn(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Bn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Un(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,t){this.comparator=e,this.root=t||$n.EMPTY}insert(e,t){return new zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qn(this.root,e,this.comparator,!1)}getReverseIterator(){return new qn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qn(this.root,e,this.comparator,!0)}}class qn{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:$n.RED,this.left=null!=r?r:$n.EMPTY,this.right=null!=i?i:$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new $n(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return $n.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ft(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ft(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1,$n.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft(57766)}get value(){throw Ft(16141)}get color(){throw Ft(16727)}get left(){throw Ft(29726)}get right(){throw Ft(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new $n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hn{constructor(e){this.comparator=e,this.data=new zn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gn(this.data.getIterator())}getIteratorFrom(e){return new Gn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Hn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class Gn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new Kn([])}unionWith(e){let t=new Hn(mn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ln(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Wn("Invalid base64 string: "+t):t}}(e);return new Qn(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const Xn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(e){if(Ut(!!e,39018),"string"==typeof e){let t=0;const n=Xn.exec(e);if(Ut(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Yn(e.seconds),nanos:Yn(e.nanos)}}function Yn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zn(e){return"string"==typeof e?Qn.fromBase64String(e):Qn.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="server_timestamp",tr="__type__",nr="__previous_value__",rr="__local_write_time__";function ir(e){var t,n;return(null==(n=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[tr])?void 0:n.stringValue)===er}function sr(e){const t=e.mapValue.fields[nr];return ir(t)?sr(t):t}function ar(e){const t=Jn(e.mapValue.fields[rr].timestampValue);return new Nn(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const lr="(default)";class cr{constructor(e,t){this.projectId=e,this.database=t||lr}static empty(){return new cr("","")}get isDefaultDatabase(){return this.database===lr}isEqual(e){return e instanceof cr&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="__type__",ur="__max__",dr={fields:{__type__:{stringValue:ur}}},mr="__vector__",fr="value";function pr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ir(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ur}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;const r=null==(n=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[hr])?void 0:n.stringValue;return r===mr}(e)?10:11:Ft(28295,{value:e})}function gr(e,t){if(e===t)return!0;const n=pr(e);if(n!==pr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ar(e).isEqual(ar(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Jn(e.timestampValue),r=Jn(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Zn(e.bytesValue).isEqual(Zn(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yn(e.geoPointValue.latitude)===Yn(t.geoPointValue.latitude)&&Yn(e.geoPointValue.longitude)===Yn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yn(e.integerValue)===Yn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Yn(e.doubleValue),r=Yn(t.doubleValue);return n===r?Ln(n)===Ln(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ln(e.arrayValue.values||[],t.arrayValue.values||[],gr);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fn(n)!==Fn(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gr(n[i],r[i])))return!1;return!0}(e,t);default:return Ft(52216,{left:e})}var r}function yr(e,t){return void 0!==(e.values||[]).find(e=>gr(e,t))}function vr(e,t){if(e===t)return 0;const n=pr(e),r=pr(t);if(n!==r)return nn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Yn(e.integerValue||e.doubleValue),r=Yn(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return xr(e.timestampValue,t.timestampValue);case 4:return xr(ar(e),ar(t));case 5:return rn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Zn(e),r=Zn(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=nn(n[i],r[i]);if(0!==e)return e}return nn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=nn(Yn(e.latitude),Yn(t.latitude));return 0!==n?n:nn(Yn(e.longitude),Yn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return br(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null==(n=a[fr])?void 0:n.arrayValue,c=null==(r=o[fr])?void 0:r.arrayValue,h=nn((null==(i=null==l?void 0:l.values)?void 0:i.length)||0,(null==(s=null==c?void 0:c.values)?void 0:s.length)||0);return 0!==h?h:br(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===dr&&t===dr)return 0;if(e===dr)return 1;if(t===dr)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=rn(r[a],s[a]);if(0!==e)return e;const t=vr(n[r[a]],i[s[a]]);if(0!==t)return t}return nn(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ft(23264,{he:n})}}function xr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return nn(e,t);const n=Jn(e),r=Jn(t),i=nn(n.seconds,r.seconds);return 0!==i?i:nn(n.nanos,r.nanos)}function br(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=vr(n[i],r[i]);if(e)return e}return nn(n.length,r.length)}function wr(e){return Cr(e)}function Cr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Jn(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Zn(e.bytesValue).toBase64():"referenceValue"in e?function(e){return fn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Cr(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Cr(e.fields[i])}`;return n+"}"}(e.mapValue):Ft(61005,{value:e})}function Er(e){switch(pr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=sr(e);return t?16+Er(t):16;case 5:return 2*e.stringValue.length;case 6:return Zn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+Er(t),0);case 10:case 11:return function(e){let t=0;return Bn(e.fields,(e,n)=>{t+=e.length+Er(n)}),t}(e.mapValue);default:throw Ft(13486,{value:e})}}function _r(e){return!!e&&"integerValue"in e}function Nr(e){return!!e&&"arrayValue"in e}function Tr(e){return!!e&&"mapValue"in e}function Sr(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Bn(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Sr(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Sr(e.arrayValue.values[n]);return t}return{...e}}class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Tr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sr(t)}setAll(e){let t=mn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Sr(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Tr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Tr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Bn(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ir(Sr(this.value))}}function Ar(e){const t=[];return Bn(e.fields,(e,n)=>{const r=new mn([e]);if(Tr(n)){const e=Ar(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Kn(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class kr{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new kr(e,0,Tn.min(),Tn.min(),Tn.min(),Ir.empty(),0)}static newFoundDocument(e,t,n,r){return new kr(e,1,t,Tn.min(),n,r,0)}static newNoDocument(e,t){return new kr(e,2,t,Tn.min(),Tn.min(),Ir.empty(),0)}static newUnknownDocument(e,t){return new kr(e,3,t,Tn.min(),Tn.min(),Ir.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,t){this.position=e,this.inclusive=t}}function Dr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?fn.comparator(fn.fromName(a.referenceValue),n.key):vr(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Or(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!gr(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t="asc"){this.field=e,this.dir=t}}function Mr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{}class Pr extends Lr{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new $r(e,t,n):"array-contains"===t?new Wr(e,n):"in"===t?new Qr(e,n):"not-in"===t?new Xr(e,n):"array-contains-any"===t?new Jr(e,n):new Pr(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Hr(e,n):new Gr(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(vr(t,this.value)):null!==t&&pr(this.value)===pr(t)&&this.matchesComparison(vr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vr extends Lr{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Vr(e,t)}matches(e){return Fr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fr(e){return"and"===e.op}function Br(e){return function(e){for(const t of e.filters)if(t instanceof Vr)return!1;return!0}(e)&&Fr(e)}function Ur(e){if(e instanceof Pr)return e.field.canonicalString()+e.op.toString()+wr(e.value);if(Br(e))return e.filters.map(e=>Ur(e)).join(",");{const t=e.filters.map(e=>Ur(e)).join(",");return`${e.op}(${t})`}}function zr(e,t){return e instanceof Pr?(n=e,(r=t)instanceof Pr&&n.op===r.op&&n.field.isEqual(r.field)&&gr(n.value,r.value)):e instanceof Vr?function(e,t){return t instanceof Vr&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&zr(n,t.filters[r]),!0)}(e,t):void Ft(19439);var n,r}function qr(e){return e instanceof Pr?`${(t=e).field.canonicalString()} ${t.op} ${wr(t.value)}`:e instanceof Vr?function(e){return e.op.toString()+" {"+e.getFilters().map(qr).join(" ,")+"}"}(e):"Filter";var t}class $r extends Pr{constructor(e,t,n){super(e,t,n),this.key=fn.fromName(n.referenceValue)}matches(e){const t=fn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Hr extends Pr{constructor(e,t){super(e,"in",t),this.keys=Kr("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Gr extends Pr{constructor(e,t){super(e,"not-in",t),this.keys=Kr("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Kr(e,t){var n;return((null==(n=t.arrayValue)?void 0:n.values)||[]).map(e=>fn.fromName(e.referenceValue))}class Wr extends Pr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nr(t)&&yr(t.arrayValue,this.value)}}class Qr extends Pr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yr(this.value.arrayValue,t)}}class Xr extends Pr{constructor(e,t){super(e,"not-in",t)}matches(e){if(yr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!yr(this.value.arrayValue,t)}}class Jr extends Pr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>yr(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,t=null,n=[],r=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function Zr(e,t=null,n=[],r=[],i=null,s=null,a=null){return new Yr(e,t,n,r,i,s,a)}function ei(e){const t=zt(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ur(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Mn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>wr(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>wr(e)).join(",")),t.Te=e}return t.Te}function ti(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Mr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!zr(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Or(e.startAt,t.startAt)&&Or(e.endAt,t.endAt)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t=null,n=[],r=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ri(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ii(e){const t=zt(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new Hn(mn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Rr(r,n))}),e.has(mn.keyField().canonicalString())||t.Ie.push(new Rr(mn.keyField(),n))}return t.Ie}function si(e){const t=zt(e);return t.Ee||(t.Ee=function(e,t){if("F"===e.limitType)return Zr(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Rr(e.field,t)});const n=e.endAt?new jr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new jr(e.startAt.position,e.startAt.inclusive):null;return Zr(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,ii(e))),t.Ee}function ai(e,t,n){return new ni(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function oi(e,t){return ti(si(e),si(t))&&e.limitType===t.limitType}function li(e){return`${ei(si(e))}|lt:${e.limitType}`}function ci(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>qr(e)).join(", ")}]`),Mn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>wr(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>wr(e)).join(",")),`Target(${t})`}(si(e))}; limitType=${e.limitType})`}function hi(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):fn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ii(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=Dr(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,ii(n),r)||n.endAt&&!function(e,t,n){const r=Dr(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,ii(n),r)));var n,r}function ui(e,t,n){const r=e.field.isKeyField()?fn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vr(r,i):Ft(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ft(19790,{direction:e.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Bn(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Un(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new zn(fn.comparator);function fi(){return mi}const pi=new zn(fn.comparator);function gi(...e){let t=pi;for(const n of e)t=t.insert(n.key,n);return t}function yi(e){let t=pi;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function vi(){return bi()}function xi(){return bi()}function bi(){return new di(e=>e.toString(),(e,t)=>e.isEqual(t))}const wi=new zn(fn.comparator),Ci=new Hn(fn.comparator);function Ei(...e){let t=Ci;for(const n of e)t=t.add(n);return t}const _i=new Hn(nn);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ni(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ln(t)?"-0":t}}function Ti(e){return{integerValue:""+e}}function Si(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Ln(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?Ti(t):Ni(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this._=void 0}}function Ai(e,t,n){return e instanceof Di?function(e,t){const n={fields:{[tr]:{stringValue:er},[rr]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ir(t)&&(t=sr(t)),t&&(n.fields[nr]=t),{mapValue:n}}(n,t):e instanceof Oi?Ri(e,t):e instanceof Mi?Li(e,t):function(e,t){const n=ji(e,t),r=Vi(n)+Vi(e.Ae);return _r(n)&&_r(e.Ae)?Ti(r):Ni(e.serializer,r)}(e,t)}function ki(e,t,n){return e instanceof Oi?Ri(e,t):e instanceof Mi?Li(e,t):n}function ji(e,t){return e instanceof Pi?_r(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class Di extends Ii{}class Oi extends Ii{constructor(e){super(),this.elements=e}}function Ri(e,t){const n=Fi(t);for(const r of e.elements)n.some(e=>gr(e,r))||n.push(r);return{arrayValue:{values:n}}}class Mi extends Ii{constructor(e){super(),this.elements=e}}function Li(e,t){let n=Fi(t);for(const r of e.elements)n=n.filter(e=>!gr(e,r));return{arrayValue:{values:n}}}class Pi extends Ii{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Vi(e){return Yn(e.integerValue||e.doubleValue)}function Fi(e){return Nr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Bi{constructor(e,t){this.version=e,this.transformResults=t}}class Ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zi(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class qi{}function $i(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new es(e.key,Ui.none()):new Qi(e.key,e.data,Ui.none());{const n=e.data,r=Ir.empty();let i=new Hn(mn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Xi(e.key,r,new Kn(i.toArray()),Ui.none())}}function Hi(e,t,n){var r;e instanceof Qi?function(e,t,n){const r=e.value.clone(),i=Yi(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xi?function(e,t,n){if(!zi(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Yi(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ji(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function Gi(e,t,n,r){return e instanceof Qi?function(e,t,n,r){if(!zi(e.precondition,t))return n;const i=e.value.clone(),s=Zi(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xi?function(e,t,n,r){if(!zi(e.precondition,t))return n;const i=Zi(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ji(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(i=t,s=n,zi(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):s);var i,s}function Ki(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ji(r.transform,e||null);null!=i&&(null===n&&(n=Ir.empty()),n.set(r.field,i))}return n||null}function Wi(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&ln(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Oi&&r instanceof Oi||n instanceof Mi&&r instanceof Mi?ln(n.elements,r.elements,gr):n instanceof Pi&&r instanceof Pi?gr(n.Ae,r.Ae):n instanceof Di&&r instanceof Di);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class Qi extends qi{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xi extends qi{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ji(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Yi(e,t,n){const r=new Map;Ut(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,ki(a,o,n[i]))}return r}function Zi(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ai(e,s,t))}return r}class es extends qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ts extends qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Hi(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Gi(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Gi(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=xi();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=$i(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Tn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ei())}isEqual(e){return this.batchId===e.batchId&&ln(this.mutations,e.mutations,(e,t)=>Wi(e,t))&&ln(this.baseMutations,e.baseMutations,(e,t)=>Wi(e,t))}}class rs{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ut(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=wi;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new rs(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss,as;(as=ss||(ss={}))[as.OK=0]="OK",as[as.CANCELLED=1]="CANCELLED",as[as.UNKNOWN=2]="UNKNOWN",as[as.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",as[as.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",as[as.NOT_FOUND=5]="NOT_FOUND",as[as.ALREADY_EXISTS=6]="ALREADY_EXISTS",as[as.PERMISSION_DENIED=7]="PERMISSION_DENIED",as[as.UNAUTHENTICATED=16]="UNAUTHENTICATED",as[as.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",as[as.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",as[as.ABORTED=10]="ABORTED",as[as.OUT_OF_RANGE=11]="OUT_OF_RANGE",as[as.UNIMPLEMENTED=12]="UNIMPLEMENTED",as[as.INTERNAL=13]="INTERNAL",as[as.UNAVAILABLE=14]="UNAVAILABLE",as[as.DATA_LOSS=15]="DATA_LOSS",
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
new vt([4294967295,4294967295],0);class os{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ls(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function cs(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function hs(e,t){return ls(e,t.toTimestamp())}function us(e){return Ut(!!e,49232),Tn.fromTimestamp(function(e){const t=Jn(e);return new Nn(t.seconds,t.nanos)}(e))}function ds(e,t){return ms(e,t).canonicalString()}function ms(e,t){const n=(r=e,new un(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function fs(e,t){return ds(e.databaseId,t.path)}function ps(e){const t=function(e){const t=un.fromString(e);return Ut(function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t),10190,{key:t.toString()}),t}(e);return 4===t.length?un.emptyPath():function(e){return Ut(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}(t)}function gs(e,t,n){return{name:fs(e,t),fields:n.value.mapValue.fields}}function ys(e){let t=ps(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ut(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=vs(e);return t instanceof Vr&&Br(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>{return new Rr(xs((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Mn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new jr(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new jr(n,t)}(n.endAt)),function(e,t,n,r,i,s,a,o){return new ni(e,t,n,r,i,s,a,o)}(t,i,a,s,o,"F",l,c)}function vs(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xs(e.unaryFilter.field);return Pr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=xs(e.unaryFilter.field);return Pr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xs(e.unaryFilter.field);return Pr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=xs(e.unaryFilter.field);return Pr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ft(61313);default:return Ft(60726)}}(e):void 0!==e.fieldFilter?(t=e,Pr.create(xs(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ft(58110);default:return Ft(50506)}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Vr.create(e.compositeFilter.filters.map(e=>vs(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ft(1026)}}(e.compositeFilter.op))}(e):Ft(30097,{filter:e});var t}function xs(e){return mn.fromServerFormat(e.fieldPath)}function bs(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}class ws{constructor(e){this.yt=e}}function Cs(e){const t=ys({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ai(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.Cn=new _s}addToCollectionParentIndex(e,t){return this.Cn.add(t),Dn.resolve()}getCollectionParents(e,t){return Dn.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Dn.resolve()}deleteFieldIndex(e,t){return Dn.resolve()}deleteAllFieldIndexes(e){return Dn.resolve()}createTargetIndexes(e,t){return Dn.resolve()}getDocumentsMatchingTarget(e,t){return Dn.resolve(null)}getIndexType(e,t){return Dn.resolve(0)}getFieldIndexes(e,t){return Dn.resolve([])}getNextCollectionGroupToUpdate(e){return Dn.resolve(null)}getMinOffset(e,t){return Dn.resolve(In.min())}getMinOffsetFromCollectionGroup(e,t){return Dn.resolve(In.min())}updateCollectionGroup(e,t,n){return Dn.resolve()}updateIndexEntries(e,t){return Dn.resolve()}}class _s{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Hn(un.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Hn(un.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ts=41943040;class Ss{static withCacheSize(e){return new Ss(e,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss.DEFAULT_COLLECTION_PERCENTILE=10,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ss.DEFAULT=new Ss(Ts,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ss.DISABLED=new Ss(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Is{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Is(0)}static cr(){return new Is(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="LruGarbageCollector";function ks([e,t],[n,r]){const i=nn(e,n);return 0===i?nn(t,r):i}class js{constructor(e){this.Ir=e,this.buffer=new Hn(ks),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ks(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ds{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Mt(As,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){On(e)?Mt(As,"Ignoring IndexedDB error during garbage collection: ",e):await jn(e)}await this.Vr(3e5)})}}class Os{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Dn.resolve(Rn.ce);const n=new js(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Mt("LruGarbageCollector","Garbage collection skipped; disabled"),Dn.resolve(Ns)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ns):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Rt()<=Y.DEBUG&&Mt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(a-s)+`ms\n\tRemoved ${i} targets in `+(o-a)+`ms\n\tRemoved ${e} documents in `+(l-o)+`ms\nTotal Duration: ${l-c}ms`),Dn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rs{constructor(){this.changes=new di(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Dn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Gi(n.mutation,e,Kn.empty(),Nn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Ei()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Ei()){const r=vi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=gi();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=vi();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ei()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=fi();const s=bi(),a=bi();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Xi)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Gi(a.mutation,t,a.mutation.getFieldMask(),Nn.now())):s.set(t.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>a.set(e,new Ms(t,s.get(e)??null))),a))}recalculateAndSaveOverlays(e,t){const n=bi();let r=new zn((e,t)=>e-t),i=Ei();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Kn.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Ei()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=xi();l.forEach(e=>{if(!i.has(e)){const r=$i(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Dn.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return i=t,fn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Dn.resolve(vi());let a=-1,o=i;return s.next(t=>Dn.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Dn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Ei())).next(e=>({batchId:a,changes:yi(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fn(t)).next(e=>{let t=gi();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=gi();return this.indexManager.getCollectionParents(e,i).next(a=>Dn.forEach(a,a=>{const o=(l=t,c=a.child(i),new ni(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,kr.newInvalidDocument(r)))});let n=gi();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Gi(s.mutation,r,Kn.empty(),Nn.now()),hi(t,r)&&(n=n.insert(e,r))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Dn.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,{id:(n=t).id,version:n.version,createTime:us(n.createTime)}),Dn.resolve();var n}getNamedQuery(e,t){return Dn.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,{name:(n=t).name,query:Cs(n.bundledQuery),readTime:us(n.readTime)}),Dn.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.overlays=new zn(fn.comparator),this.qr=new Map}getOverlay(e,t){return Dn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=vi();return Dn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Dn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Dn.resolve()}getOverlaysForCollection(e,t,n){const r=vi(),i=t.length+1,s=new fn(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Dn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new zn((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=vi(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=vi(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Dn.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new is(t,n));let i=this.qr.get(t);void 0===i&&(i=Ei(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.sessionToken=Qn.EMPTY_BYTE_STRING}getSessionToken(e){return Dn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Dn.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.Qr=new Hn(Us.$r),this.Ur=new Hn(Us.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Us(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Us(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new fn(new un([])),n=new Us(t,e),r=new Us(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new fn(new un([])),n=new Us(t,e),r=new Us(t,e+1);let i=Ei();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Us(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Us{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return fn.comparator(e.key,t.key)||nn(e.Yr,t.Yr)}static Kr(e,t){return nn(e.Yr,t.Yr)||fn.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Hn(Us.$r)}checkEmpty(e){return Dn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ns(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new Us(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Dn.resolve(s)}lookupMutationBatch(e,t){return Dn.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Dn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Dn.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return Dn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Us(t,0),r=new Us(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Dn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hn(nn);return t.forEach(e=>{const t=new Us(e,0),r=new Us(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Dn.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;fn.isDocumentKey(i)||(i=i.child(""));const s=new Us(new fn(i),0);let a=new Hn(nn);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),Dn.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ut(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Dn.forEach(t.mutations,r=>{const i=new Us(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Us(t,0),r=this.Zr.firstAfterOrEqual(n);return Dn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Dn.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.ri=e,this.docs=new zn(fn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Dn.resolve(n?n.document.mutableCopy():kr.newInvalidDocument(t))}getEntries(e,t){let n=fi();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():kr.newInvalidDocument(e))}),Dn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=fi();const s=t.path,a=new fn(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||An(Sn(a),n)<=0||(r.has(a.key)||hi(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Dn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ft(9500)}ii(e,t){return Dn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new $s(this)}getSize(e){return Dn.resolve(this.size)}}class $s extends Rs{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Dn.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.persistence=e,this.si=new di(e=>ei(e),ti),this.lastRemoteSnapshotVersion=Tn.min(),this.highestTargetId=0,this.oi=0,this._i=new Bs,this.targetCount=0,this.ai=Is.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Dn.resolve()}getLastRemoteSnapshotVersion(e){return Dn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Dn.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Dn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Dn.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Is(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Dn.resolve()}updateTargetData(e,t){return this.Pr(t),Dn.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Dn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Dn.waitFor(i).next(()=>r)}getTargetCount(e){return Dn.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Dn.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Dn.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Dn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Dn.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Dn.resolve(n)}containsKey(e,t){return Dn.resolve(this._i.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,t){this.ui={},this.overlays={},this.ci=new Rn(0),this.li=!1,this.li=!0,this.hi=new Fs,this.referenceDelegate=e(this),this.Pi=new Hs(this),this.indexManager=new Es,this.remoteDocumentCache=new qs(e=>this.referenceDelegate.Ti(e)),this.serializer=new ws(t),this.Ii=new Ps(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vs,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new zs(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Mt("MemoryPersistence","Starting transaction:",e);const r=new Ks(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Dn.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Ks extends kn{constructor(e){super(),this.currentSequenceNumber=e}}class Ws{constructor(e){this.persistence=e,this.Ri=new Bs,this.Vi=null}static mi(e){return new Ws(e)}get fi(){if(this.Vi)return this.Vi;throw Ft(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Dn.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Dn.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Dn.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dn.forEach(this.fi,n=>{const r=fn.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Tn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Dn.or([()=>Dn.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Qs{constructor(e,t){this.persistence=e,this.pi=new di(e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Vn(t)),t=Pn(e.get(n),t);return Vn(t)}(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new Os(e,t)}(this,t)}static mi(e,t){return new Qs(e,t)}Ei(){}di(e){return Dn.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Dn.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Dn.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Tn.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Dn.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Dn.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Dn.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Dn.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Er(e.data.value)),t}br(e,t,n){return Dn.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Dn.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Ei(),r=Ei();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Xs(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=U()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Js;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Rt()<=Y.DEBUG&&Mt("QueryEngine","SDK will not create cache indexes for query:",ci(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Dn.resolve()):(Rt()<=Y.DEBUG&&Mt("QueryEngine","Query:",ci(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Rt()<=Y.DEBUG&&Mt("QueryEngine","The SDK decides to create cache indexes for query:",ci(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(t))):Dn.resolve())}ys(e,t){if(ri(t))return Dn.resolve(null);let n=si(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ai(t,null,"F"),n=si(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Ei(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,ai(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return ri(t)||r.isEqual(Tn.min())?Dn.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Dn.resolve(null):(Rt()<=Y.DEBUG&&Mt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ci(t)),this.vs(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Tn.fromTimestamp(1e9===r?new Nn(n+1,0):new Nn(n,r));return new In(i,fn.empty(),t)}(r,-1)).next(e=>e))})}Ds(e,t){let n=new Hn(function(e){return(t,n)=>{let r=!1;for(const i of ii(e)){const e=ui(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}(e));return t.forEach((t,r)=>{hi(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Rt()<=Y.DEBUG&&Mt("QueryEngine","Using full collection scan to execute query:",ci(t)),this.ps.getDocumentsMatchingQuery(e,t,In.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new zn(nn),this.xs=new di(e=>ei(e),ti),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ls(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function ea(e,t){const n=zt(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=Ei();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function ta(e,t){const n=zt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}class na{constructor(){this.activeTargetIds=_i}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ra{constructor(){this.Mo=new na,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new na,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{Oo(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="ConnectivityMonitor";class aa{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Mt(sa,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Mt(sa,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa=null;function la(){return null===oa?oa=268435456+Math.round(2147483648*Math.random()):oa++,"0x"+oa.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const ca="RestConnection",ha={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ua{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===lr?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){const s=la(),a=this.zo(e,t.toUriEncodedString());Mt(ca,`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),c=P(l);return this.Jo(e,a,o,n,c).then(t=>(Mt(ca,`Received RPC '${e}' ${s}: `,t),t),t=>{throw Pt(ca,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=ha[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="WebChannelConnection";class fa extends ua{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=la();return new Promise((i,a)=>{const o=new bt;o.setWithCredentials(!0),o.listenOnce(Ct.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Et.NO_ERROR:const t=o.getResponseJson();Mt(ma,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case Et.TIMEOUT:Mt(ma,`RPC '${e}' ${s} timed out`),a(new $t(qt.DEADLINE_EXCEEDED,"Request time out"));break;case Et.HTTP_ERROR:const n=o.getStatus();if(Mt(ma,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(qt).indexOf(t)>=0?t:qt.UNKNOWN}(t.status);a(new $t(e,t.message))}else a(new $t(qt.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new $t(qt.UNAVAILABLE,"Connection failed."));break;default:Ft(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Mt(ma,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);Mt(ma,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=la(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=St(),a=Tt(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Mt(ma,`Creating RPC '${e}' stream ${r}: ${c}`,o);const h=s.createWebChannel(c,o);this.I_(h);let u=!1,d=!1;const m=new da({Yo:t=>{d?Mt(ma,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(u||(Mt(ma,`Opening RPC '${e}' stream ${r} transport.`),h.open(),u=!0),Mt(ma,`RPC '${e}' stream ${r} sending:`,t),h.send(t))},Zo:()=>h.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return f(h,wt.EventType.OPEN,()=>{d||(Mt(ma,`RPC '${e}' stream ${r} transport opened.`),m.o_())}),f(h,wt.EventType.CLOSE,()=>{d||(d=!0,Mt(ma,`RPC '${e}' stream ${r} transport closed`),m.a_(),this.E_(h))}),f(h,wt.EventType.ERROR,t=>{d||(d=!0,Pt(ma,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),m.a_(new $t(qt.UNAVAILABLE,"The operation could not be completed")))}),f(h,wt.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];Ut(!!i,16349);const s=i,a=(null==s?void 0:s.error)||(null==(n=s[0])?void 0:n.error);if(a){Mt(ma,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=ss[e];if(void 0!==t)return function(e){if(void 0===e)return Lt("GRPC error has no .code"),qt.UNKNOWN;switch(e){case ss.OK:return qt.OK;case ss.CANCELLED:return qt.CANCELLED;case ss.UNKNOWN:return qt.UNKNOWN;case ss.DEADLINE_EXCEEDED:return qt.DEADLINE_EXCEEDED;case ss.RESOURCE_EXHAUSTED:return qt.RESOURCE_EXHAUSTED;case ss.INTERNAL:return qt.INTERNAL;case ss.UNAVAILABLE:return qt.UNAVAILABLE;case ss.UNAUTHENTICATED:return qt.UNAUTHENTICATED;case ss.INVALID_ARGUMENT:return qt.INVALID_ARGUMENT;case ss.NOT_FOUND:return qt.NOT_FOUND;case ss.ALREADY_EXISTS:return qt.ALREADY_EXISTS;case ss.PERMISSION_DENIED:return qt.PERMISSION_DENIED;case ss.FAILED_PRECONDITION:return qt.FAILED_PRECONDITION;case ss.ABORTED:return qt.ABORTED;case ss.OUT_OF_RANGE:return qt.OUT_OF_RANGE;case ss.UNIMPLEMENTED:return qt.UNIMPLEMENTED;case ss.DATA_LOSS:return qt.DATA_LOSS;default:return Ft(39323,{code:e})}}(t)}(t),i=a.message;void 0===n&&(n=qt.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,m.a_(new $t(n,i)),h.close()}else Mt(ma,`RPC '${e}' stream ${r} received:`,i),m.u_(i)}}),f(a,Nt.STAT_EVENT,t=>{t.stat===_t.PROXY?Mt(ma,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===_t.NOPROXY&&Mt(ma,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function pa(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(e){return new os(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Mt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="PersistentStream";class xa{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ya(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===qt.RESOURCE_EXHAUSTED?(Lt(t.toString()),Lt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===qt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.D_===t&&this.G_(e,n)},t=>{e(()=>{const e=new $t(qt.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Mt(va,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Mt(va,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ba extends xa{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ut(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Ut(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?us(e.updateTime):us(t);return n.isEqual(Tn.min())&&(n=us(t)),new Bi(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=us(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=function(e){return new un(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof Qi)n={update:gs(e,t.key,t.value)};else if(t instanceof es)n={delete:fs(e,t.key)};else if(t instanceof Xi)n={update:gs(e,t.key,t.data),updateMask:bs(t.fieldMask)};else{if(!(t instanceof ts))return Ft(16599,{Vt:t.type});n={verify:fs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Di)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Oi)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Mi)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pi)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Ft(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:hs(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Ft(27497))),n;var r,i}(this.serializer,e))};this.q_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{}class Ca extends wa{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new $t(qt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(e,ms(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new $t(qt.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,ms(t,n),r,s,a,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new $t(qt.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Ea{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lt(t),this.aa=!1):Mt("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="RemoteStore";class Na{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Ia(this)&&(Mt(_a,"Restarting streams for network reachability change."),await async function(e){const t=zt(e);t.Ea.add(4),await Sa(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Ta(t)}(this))})}),this.Ra=new Ea(n,r)}}async function Ta(e){if(Ia(e))for(const t of e.da)await t(!0)}async function Sa(e){for(const t of e.da)await t(!1)}function Ia(e){return 0===zt(e).Ea.size}async function Aa(e,t,n){if(!On(t))throw t;e.Ea.add(1),await Sa(e),e.Ra.set("Offline"),n||(n=()=>function(e){const t=zt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Mt(_a,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Ta(e)})}function ka(e,t){return t().catch(n=>Aa(e,n,t))}async function ja(e){const t=zt(e),n=Ua(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:-1;for(;Da(t);)try{const e=await ta(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Oa(t,e)}catch(i){await Aa(t,i)}Ra(t)&&Ma(t)}function Da(e){return Ia(e)&&e.Ta.length<10}function Oa(e,t){e.Ta.push(t);const n=Ua(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Ra(e){return Ia(e)&&!Ua(e).x_()&&e.Ta.length>0}function Ma(e){Ua(e).start()}async function La(e){Ua(e).ra()}async function Pa(e){const t=Ua(e);for(const n of e.Ta)t.ea(n.mutations)}async function Va(e,t,n){const r=e.Ta.shift(),i=rs.from(r,t,n);await ka(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await ja(e)}async function Fa(e,t){t&&Ua(e).X_&&await async function(e,t){if(function(e){switch(e){case qt.OK:return Ft(64938);case qt.CANCELLED:case qt.UNKNOWN:case qt.DEADLINE_EXCEEDED:case qt.RESOURCE_EXHAUSTED:case qt.INTERNAL:case qt.UNAVAILABLE:case qt.UNAUTHENTICATED:return!1;case qt.INVALID_ARGUMENT:case qt.NOT_FOUND:case qt.ALREADY_EXISTS:case qt.PERMISSION_DENIED:case qt.FAILED_PRECONDITION:case qt.ABORTED:case qt.OUT_OF_RANGE:case qt.UNIMPLEMENTED:case qt.DATA_LOSS:return!0;default:return Ft(15467,{code:e})}}(n=t.code)&&n!==qt.ABORTED){const n=e.Ta.shift();Ua(e).B_(),await ka(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ja(e)}var n}(e,t),Ra(e)&&Ma(e)}async function Ba(e,t){const n=zt(e);n.asyncQueue.verifyOperationInProgress(),Mt(_a,"RemoteStore received new credentials");const r=Ia(n);n.Ea.add(3),await Sa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ta(n)}function Ua(e){return e.fa||(e.fa=function(e,t,n){const r=zt(e);return r.sa(),new ba(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:La.bind(null,e),r_:Fa.bind(null,e),ta:Pa.bind(null,e),na:Va.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await ja(e)):(await e.fa.stop(),e.Ta.length>0&&(Mt(_a,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class za{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new za(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $t(qt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qa(e,t){if(Lt("AsyncQueue",`${t}: ${e}`),On(e))return new $t(qt.UNAVAILABLE,`${t}: ${e}`);throw e}class $a{constructor(){this.queries=Ha(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=zt(e),r=n.queries;n.queries=Ha(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new $t(qt.ABORTED,"Firestore shutting down"))}}function Ha(){return new di(e=>li(e),oi)}var Ga,Ka;(Ka=Ga||(Ga={})).Ma="default",Ka.Cache="cache";class Wa{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new di(e=>li(e),oi),this.Iu=new Map,this.Eu=new Set,this.du=new zn(fn.comparator),this.Au=new Map,this.Ru=new Bs,this.Vu={},this.mu=new Map,this.fu=Is.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Qa(e,t,n){const r=function(e){const t=zt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ja.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ya.bind(null,t),t}(e);try{const e=await function(e,t){const n=zt(e),r=Nn.now(),i=t.reduce((e,t)=>e.add(t.key),Ei());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=fi(),l=Ei();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Ki(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Xi(e.key,t,Ar(t.value.mapValue),Ui.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:yi(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new zn(nn)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await to(r,e.changes),await ja(r.remoteStore)}catch(i){const e=qa(i,"Failed to persist write");n.reject(e)}}function Xa(e,t,n){const r=zt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=zt(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&function(e){e.Ca.forEach(e=>{e.next()})}(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ja(e,t){const n=zt(e),r=t.batch.batchId;try{const e=await function(e,t){const n=zt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Dn.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Ut(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ei();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);eo(n,r,null),Za(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await to(n,e)}catch(i){await jn(i)}}async function Ya(e,t,n){const r=zt(e);try{const e=await function(e,t){const n=zt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ut(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);eo(r,t,n),Za(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await to(r,e)}catch(i){await jn(i)}}function Za(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function eo(e,t,n){const r=zt(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}async function to(e,t,n){const r=zt(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null==(t=null==n?void 0:n.targetChanges.get(o.targetId))?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Xs.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=zt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Dn.forEach(t,t=>Dn.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Dn.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!On(r))throw r;Mt("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function no(e,t){const n=zt(e);if(!n.currentUser.isEqual(t)){Mt("SyncEngine","User change. New user:",t.toKey());const e=await ea(n.localStore,t);n.currentUser=t,i="'waitForPendingWrites' promise is rejected due to a user change.",(r=n).mu.forEach(e=>{e.forEach(e=>{e.reject(new $t(qt.CANCELLED,i))})}),r.mu.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await to(n,e.Ls)}var r,i}class ro{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ga(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return function(e,t,n,r){return new Zs(e,t,n,r)}(this.persistence,new Ys,e.initialUser,this.serializer)}Cu(e){return new Gs(Ws.mi,this.serializer)}Du(e){return new ra}async terminate(){var e,t;null==(e=this.gcScheduler)||e.stop(),null==(t=this.indexBackfillerScheduler)||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ro.provider={build:()=>new ro};class io extends ro{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ut(this.persistence.referenceDelegate instanceof Qs,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Ds(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Ss.withCacheSize(this.cacheSizeBytes):Ss.DEFAULT;return new Gs(e=>Qs.mi(e,t),this.serializer)}}class so{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Xa(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=no.bind(null,this.syncEngine),await async function(e,t){const n=zt(e);t?(n.Ea.delete(2),await Ta(n)):t||(n.Ea.add(2),await Sa(n),n.Ra.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $a}createDatastore(e){const t=ga(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new fa(r));var r;return function(e,t,n,r){return new Ca(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Xa(this.syncEngine,e,0),s=aa.v()?new aa:new ia,new Na(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Wa(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=zt(e);Mt(_a,"RemoteStore shutting down."),t.Ea.add(5),await Sa(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null==(e=this.datastore)||e.terminate(),null==(t=this.eventManager)||t.terminate()}}so.provider={build:()=>new so};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ao="FirestoreClient";class oo{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=jt.UNAUTHENTICATED,this.clientId=tn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Mt(ao,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Mt(ao,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=qa(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function lo(e,t){e.asyncQueue.verifyOperationInProgress(),Mt(ao,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await ea(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function co(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Mt(ao,"Using user provided OfflineComponentProvider");try{await lo(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!("FirebaseError"===(n=i).name?n.code===qt.FAILED_PRECONDITION||n.code===qt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;Pt("Error using user provided cache. Falling back to memory cache: "+i),await lo(e,new ro)}}else Mt(ao,"Using default OfflineComponentProvider"),await lo(e,new io(void 0));var n;return e._offlineComponents}(e);Mt(ao,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ba(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ba(t.remoteStore,n)),e._onlineComponents=t}function ho(e){return async function(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Mt(ao,"Using user provided OnlineComponentProvider"),await co(e,e._uninitializedComponentsProvider._online)):(Mt(ao,"Using default OnlineComponentProvider"),await co(e,new so))),e._onlineComponents}(e).then(e=>e.syncEngine)}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const mo=new Map,fo="firestore.googleapis.com",po=!0;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new $t(qt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fo,this.ssl=po}else this.host=e.host,this.ssl=e.ssl??po;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ts;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new $t(qt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new $t(qt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uo(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new $t(qt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new $t(qt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new $t(qt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class yo{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new go({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $t(qt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new $t(qt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new go(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Kt;switch(e.type){case"firstParty":return new Jt(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new $t(qt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mo.get(e);t&&(Mt("ComponentProvider","Removing Datastore"),mo.delete(e),t.terminate())}(this),Promise.resolve()}}function vo(e,t,n,r={}){var i;e=bn(e,yo);const s=P(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(async function(e){(await fetch(e,{credentials:"include"})).ok}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(`https://${l}`),B("Firestore",!0)),a.host!==fo&&a.host!==l&&Pt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:s,emulatorOptions:r};if(!H(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=jt.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[k(JSON.stringify({alg:"none",type:"JWT"})),k(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null==(i=e._app)?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new $t(qt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new jt(s)}e._authCredentials=new Wt(new Gt(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new xo(this.firestore,e,this._query)}}class bo{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bo(this.firestore,e,this._key)}toJSON(){return{type:bo._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Cn(t,bo._jsonSchema))return new bo(e,n||null,new fn(un.fromString(t.referencePath)))}}bo._jsonSchemaVersion="firestore/documentReference/1.0",bo._jsonSchema={type:wn("string",bo._jsonSchemaVersion),referencePath:wn("string")};class wo extends xo{constructor(e,t,n){super(e,t,function(e){return new ni(e)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bo(this.firestore,null,new fn(e))}withConverter(e){return new wo(this.firestore,e,this._path)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Co="AsyncQueue";class Eo{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ya(this,"async_queue_retry"),this._c=()=>{const e=pa();e&&Mt(Co,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=pa();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pa();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ht;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!On(e))throw e;Mt(Co,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Lt("INTERNAL UNHANDLED ERROR: ",_o(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=za.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Ft(47125,{Pc:_o(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function _o(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class No extends yo{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Eo,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Eo(e),this._firestoreClient=void 0,await e}}}function To(e){if(e._terminated)throw new $t(qt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const i=e._freezeSettings(),s=(a=e._databaseId,o=(null==(t=e._app)?void 0:t.options.appId)||"",l=e._persistenceKey,c=i,new or(a,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,uo(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator));var a,o,l,c;e._componentsProvider||(null==(n=i.localCache)?void 0:n._offlineComponentProvider)&&(null==(r=i.localCache)?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new oo(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class So{constructor(e){this._byteString=e}static fromBase64String(e){try{return new So(Qn.fromBase64String(e))}catch(t){throw new $t(qt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new So(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:So._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cn(e,So._jsonSchema))return So.fromBase64String(e.bytes)}}So._jsonSchemaVersion="firestore/bytes/1.0",So._jsonSchema={type:wn("string",So._jsonSchemaVersion),bytes:wn("string")};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Io{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new $t(qt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $t(qt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $t(qt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ko._jsonSchemaVersion}}static fromJSON(e){if(Cn(e,ko._jsonSchema))return new ko(e.latitude,e.longitude)}}ko._jsonSchemaVersion="firestore/geoPoint/1.0",ko._jsonSchema={type:wn("string",ko._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class jo{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:jo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cn(e,jo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new jo(e.vectorValues);throw new $t(qt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jo._jsonSchemaVersion="firestore/vectorValue/1.0",jo._jsonSchema={type:wn("string",jo._jsonSchemaVersion),vectorValues:wn("object")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Do=/^__.*__$/;class Oo{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qi(e,this.data,t,this.fieldTransforms)}}function Ro(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft(40011,{Ac:e})}}class Mo{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mo({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null==(t=this.path)?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null==(t=this.path)?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Go(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Ro(this.Ac)&&Do.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Lo{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ga(e)}Cc(e,t,n,r=!1){return new Mo({Ac:e,methodName:t,Dc:n,path:mn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Po(e){const t=e._freezeSettings(),n=ga(e._databaseId);return new Lo(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vo(e,t,n,r,i,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);zo("Data must be an object, but it was:",a,r);const o=Bo(r,a);let l,c;if(s.merge)l=new Kn(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=qo(t,r,n);if(!a.contains(i))throw new $t(qt.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Ko(e,i)||e.push(i)}l=new Kn(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Oo(new Ir(o),l,c)}function Fo(e,t){if(Uo(e=K(e)))return zo("Unsupported field value:",t,e),Bo(e,t);if(e instanceof Ao)return function(e,t){if(!Ro(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Fo(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=K(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Si(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Nn.fromDate(e);return{timestampValue:ls(t.serializer,n)}}if(e instanceof Nn){const n=new Nn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ls(t.serializer,n)}}if(e instanceof ko)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof So)return{bytesValue:cs(t.serializer,e._byteString)};if(e instanceof bo){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ds(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof jo)return n=e,r=t,{mapValue:{fields:{[hr]:{stringValue:mr},[fr]:{arrayValue:{values:n.toArray().map(e=>{if("number"!=typeof e)throw r.Sc("VectorValues must only contain numeric values.");return Ni(r.serializer,e)})}}}}};var n,r;throw t.Sc(`Unsupported field value: ${xn(e)}`)}(e,t)}function Bo(e,t){const n={};return Un(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Bn(e,(e,r)=>{const i=Fo(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Uo(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Nn||e instanceof ko||e instanceof So||e instanceof bo||e instanceof Ao||e instanceof jo)}function zo(e,t,n){if(!Uo(n)||!vn(n)){const r=xn(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function qo(e,t,n){if((t=K(t))instanceof Io)return t._internalPath;if("string"==typeof t)return Ho(e,t);throw Go("Field path arguments must be of type string or ",e,!1,void 0,n)}const $o=new RegExp("[~\\*/\\[\\]]");function Ho(e,t,n){if(t.search($o)>=0)throw Go(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Io(...t.split("."))._internalPath}catch(r){throw Go(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Go(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new $t(qt.INVALID_ARGUMENT,o+e+l)}function Ko(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qo(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xo("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qo extends Wo{data(){return super.data()}}function Xo(e,t){return"string"==typeof t?Ho(e,t):t instanceof Io?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yo extends Wo{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Xo("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $t(qt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yo._jsonSchema={type:wn("string",Yo._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class Zo extends Yo{data(e={}){return super.data(e)}}class el{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Jo(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Zo(this._firestore,this._userDataWriter,n.key,n,new Jo(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $t(qt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Zo(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Jo(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Zo(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jo(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:tl(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $t(qt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=el._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tn.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tl(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft(61501,{type:e})}}function nl(e,t){const n=bn(e.firestore,No),r=function(e,t,...n){if(e=K(e),1===arguments.length&&(t=tn.newId()),pn("doc","path",t),e instanceof yo){const r=un.fromString(t,...n);return gn(r),new bo(e,null,new fn(r))}{if(!(e instanceof bo||e instanceof wo))throw new $t(qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(un.fromString(t,...n));return gn(r),new bo(e.firestore,e instanceof wo?e.converter:null,new fn(r))}}(e),i=function(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}(e.converter,t);return function(e,t){return function(e,t){const n=new Ht;return e.asyncQueue.enqueueAndForget(async()=>Qa(await ho(e),t,n)),n.promise}(To(e),t)}(n,[Vo(Po(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ui.exists(!1))]).then(()=>r)}el._jsonSchemaVersion="firestore/querySnapshot/1.0",el._jsonSchema={type:wn("string",el._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")},function(e,t=!0){Dt="12.0.0",rt(new W("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new No(new Qt(e.getProvider("auth-internal")),new Zt(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new $t(qt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cr(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),ot(At,kt,e),ot(At,kt,"esm2020")}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
ot("firebase","12.0.0","app");const rl=function(e,t){const n="object"==typeof e?e:function(e=Je){const t=Ze.get(e);if(!t&&e===Je&&M())return at();if(!t)throw it.create("no-app",{appName:e});return t}(),r="string"==typeof e?e:t||lr,i=function(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=R("firestore");e&&vo(i,...e)}return i}(at({apiKey:"AIzaSyAfHlyEM4OuGrCsGBAttCkhh1_sO15K4CA",authDomain:"check-in-eb3a1.firebaseapp.com",projectId:"check-in-eb3a1",storageBucket:"check-in-eb3a1.firebasestorage.app",messagingSenderId:"868356690302",appId:"1:868356690302:web:f79f7e76ac72b40150e32f",measurementId:"G-V6G42662GT"})),il=async e=>{try{const t=(e,t)=>({recording:{yes:"SIM, quero a gravação vitalícia",no:"NÃO, não quero",no_thanks:"Confirmo que quero fazer o check-in e NÃO quero aproveitar a oportunidade de ter a gravação vitalícia",already_purchased:"SIM (Já garanti a gravação vitalícia)"},code:{yes:"SIM, quero o código completo",no:"NÃO, não quero",no_thanks:"Confirmo que quero fazer o check-in e NÃO quero aproveitar a oportunidade de ter o código completo",already_purchased:"SIM (Já garanti o código completo)"}}[t][e]||e||"Não respondido"),n={name:e.name,email:e.email,date:(new Date).toLocaleDateString("pt-BR"),time:(new Date).toLocaleTimeString("pt-BR"),recordingResponse:t(e.recordingResponse,"recording"),codeResponse:t(e.codeResponse,"code"),timestamp:new Date,userAgent:navigator.userAgent,url:window.location.href,referrer:document.referrer||"Direct"};return{success:!0,id:(await nl(function(e,t,...n){if(e=K(e),pn("collection","path",t),e instanceof yo){const r=un.fromString(t,...n);return yn(r),new wo(e,null,r)}{if(!(e instanceof bo||e instanceof wo))throw new $t(qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(un.fromString(t,...n));return yn(r),new wo(e.firestore,null,r)}}(rl,"checkins"),n)).id,data:n}}catch(t){return{success:!1,error:t.message}}},sl=e.memo(({value:e,onChange:t,placeholder:n})=>f.jsx("input",{type:"text",value:e,onChange:t,placeholder:n,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-text-light placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary/50",autoFocus:!0})),al=e.memo(({id:e,checked:t,onChange:n,label:r,className:i=""})=>f.jsxs("div",{className:`flex items-center gap-3 p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors ${i}`,children:[f.jsx("input",{type:"checkbox",id:e,checked:t,onChange:n,className:"w-5 h-5 text-primary bg-transparent border-2 border-primary/30 rounded focus:ring-primary/50 focus:ring-2 cursor-pointer"}),f.jsx("label",{htmlFor:e,className:"text-text-light text-sm cursor-pointer flex-1",children:r})]})),ol=e.memo(({onClick:e,disabled:t,children:n,className:r=""})=>f.jsx("button",{onClick:e,disabled:t,className:`px-8 py-3 font-semibold rounded-lg transition-colors duration-200 ${r}`,children:n})),ll=e.memo(({currentStep:t,completedSteps:n,userData:i,onStepComplete:s,onClose:a})=>{const[o,l]=e.useState({name:i.name||"",email:i.email||"",recordingResponse:"",codeResponse:""}),[c,h]=e.useState(null),[u,d]=e.useState(null),[m,p]=e.useState(null),[g,y]=e.useState(!1),[v,x]=e.useState(!1),[b,w]=e.useState(!1),[S,I]=e.useState(!1),[A,k]=e.useState({computer:!1,paper:!1,pen:!1,quietPlace:!1,internet:!1}),j=e.useRef(null),D=e.useCallback(()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.frequency.setValueAtTime(800,e.currentTime),t.frequency.setValueAtTime(1e3,e.currentTime+.1),n.gain.setValueAtTime(.3,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.2),t.start(e.currentTime),t.stop(e.currentTime+.2)}catch(e){}},[]),[O,R]=e.useState(null),[M,L]=e.useState({noThanks:!1,alreadyHave:!1}),[P,V]=e.useState(null),[F,B]=e.useState({noThanks:!1,alreadyHave:!1}),[U,z]=e.useState(!1),[q,$]=e.useState(3);e.useEffect(()=>{if(U&&q>0){const e=setTimeout(()=>{$(e=>e-1)},1e3);return()=>clearTimeout(e)}if(U&&0===q){const e="https://calendar.google.com/calendar/u/0/r/eventedit?text=Bootcamp+Programador+em+7+Dias+-+Aula+1&details=Link+da+call:+https://us06web.zoom.us/j/87985750737?pwd=IY4s28M2H02QTVCBDOcsKFb2Nb1wF1.1&location=https://us06web.zoom.us/j/87985750737?pwd=IY4s28M2H02QTVCBDOcsKFb2Nb1wF1.1&dates=20250819T230000Z/20250820T010000Z";window.open(e,"_blank"),z(!1),$(3)}},[U,q]);const H=e.useMemo(()=>[{id:0,icon:"👤",title:"Confirmar Dados",description:"Digite seu nome completo para o ingresso",buttonText:`Confirmo que sou ${o.name||"[NOME]"}`,color:"bg-blue-500",type:"form"},{id:1,icon:"📅",title:"Adicionar na Agenda",description:"Adicione o evento no seu Google Calendar com link do Zoom",buttonText:"Adicionei no meu calendário",color:"bg-purple-500",type:"action"},{id:2,icon:"💬",title:"Entrar no WhatsApp",description:"Junte-se ao grupo exclusivo do bootcamp",buttonText:"Entrei no grupo exclusivo",color:"bg-green-500",type:"external"},{id:3,icon:"📹",title:"Configurar Zoom",description:"Baixe o Zoom e teste áudio/vídeo",buttonText:"Zoom configurado e testado",color:"bg-indigo-500",type:"zoom"},{id:4,icon:"💻",title:"Preparar Ambiente",description:"Certifique-se de ter tudo pronto",buttonText:"Tenho tudo preparado",color:"bg-orange-500",type:"equipment"},{id:5,icon:"🎥",title:"Gravação Vitalícia",description:"Garanta acesso vitalício às gravações do evento",buttonText:"Quero a gravação vitalícia",color:"bg-red-500",type:"recording"},{id:6,icon:"💻",title:"Código Completo do Projeto",description:"Tenha acesso ao código completo da aplicação",buttonText:"Quero o código completo",color:"bg-emerald-500",type:"code"},{id:7,icon:"🎫",title:"Gerar Ingresso Personalizado",description:"Adicione sua foto e gere seu ingresso exclusivo",buttonText:"Gerar Meu Ingresso",color:"bg-primary",type:"credential"}],[o.name]),G=e.useCallback(e=>{l(t=>({...t,name:e.target.value}))},[]),K=e.useCallback(e=>{l(t=>({...t,email:e.target.value}))},[]),W=e.useCallback(e=>{const t=e.target.files[0];if(t){if(!t.type.startsWith("image/"))return void alert("Por favor, selecione apenas arquivos de imagem (JPG, PNG, etc.)");if(t.size>5242880)return void alert("A imagem deve ter no máximo 5MB");const e=new FileReader;e.onload=e=>{h(e.target.result)},e.readAsDataURL(t)}},[]),Q=e.useCallback(()=>{x(!0)},[]),X=e.useCallback(e=>{R(e),l(t=>({...t,recordingResponse:e})),"yes"===e&&("undefined"!=typeof fbq&&fbq("track","CustomEvent",{event_name:"RecordingOfferAccepted",content_name:"Gravação Vitalícia Bootcamp",value:0,currency:"BRL"}),window.open("https://pay.assiny.com.br/38ca3c/node/97708J","_blank"))},[]),J=e.useCallback(e=>{V(e),l(t=>({...t,codeResponse:e})),"yes"===e&&("undefined"!=typeof fbq&&fbq("track","CustomEvent",{event_name:"CodeOfferAccepted",content_name:"Código Completo Bootcamp",value:0,currency:"BRL"}),window.open("https://pay.assiny.com.br/de8237/node/242143","_blank"))},[]),Y=e.useCallback(async(e,t)=>{d(e),p(t),y(!0),x(!1),s(7),D();const n={name:o.name,email:o.email,recordingResponse:o.recordingResponse,codeResponse:o.codeResponse};(e=>{try{const t=localStorage.getItem("checkin_data"),n=t?JSON.parse(t):[];return n.push({name:e.name,email:e.email,date:(new Date).toLocaleDateString("pt-BR"),time:(new Date).toLocaleTimeString("pt-BR"),recordingResponse:T(e.recordingResponse,"recording"),codeResponse:T(e.codeResponse,"code"),timestamp:(new Date).toISOString()}),localStorage.setItem("checkin_data",JSON.stringify(n)),!0}catch(t){return!1}})(n);try{const e=await il(n);if(!e.success)throw new Error(e.error)}catch(r){try{const e=await(async e=>{try{const n={name:e.name,email:e.email,date:(new Date).toLocaleDateString("pt-BR"),time:(new Date).toLocaleTimeString("pt-BR"),recordingResponse:e.recordingResponse||"",codeResponse:e.codeResponse||""},r=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});try{return await r.text(),!0}catch(t){return!0}}catch(r){try{const t=new FormData;return t.append("name",e.name),t.append("email",e.email),t.append("date",(new Date).toLocaleDateString("pt-BR")),t.append("time",(new Date).toLocaleTimeString("pt-BR")),t.append("recordingResponse",e.recordingResponse||""),t.append("codeResponse",e.codeResponse||""),await fetch(N,{method:"POST",mode:"no-cors",body:t}),!0}catch(n){return!1}}})(n);if(!e)throw new Error("Falha no Google Sheets")}catch(i){try{await(async e=>{try{const t={name:e.name,email:e.email,date:(new Date).toLocaleDateString("pt-BR"),time:(new Date).toLocaleTimeString("pt-BR"),recordingResponse:T(e.recordingResponse,"recording"),codeResponse:T(e.codeResponse,"code"),timestamp:(new Date).toISOString()};return!!(await fetch("https://hook.us1.make.com/YOUR_WEBHOOK_URL",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok}catch(r){return!1}})(n)}catch(a){}}}"undefined"!=typeof fbq&&(fbq("track","Lead",{content_name:"Check-in Bootcamp Programador em 7 Dias",content_category:"Check-in",value:0,currency:"BRL",ticket_id:t}),fbq("track","CustomEvent",{event_name:"CheckinCompleted",ticket_id:t,content_name:"Check-in Bootcamp Programador em 7 Dias"}))},[s,D,o.name,o.email]),Z=e.useCallback(e=>0===e||(e<=6?n.includes(e-1):7===e&&n.includes(6)),[n]),ee=e.useCallback(e=>n.includes(e),[n]),te=e.useCallback(({step:e,isAccessible:t,isCompleted:n,isCurrent:r})=>f.jsxs("button",{onClick:()=>{if(t&&!n){if(0===e.id){if(!o.name.trim())return void alert("Por favor, digite seu nome completo");if(!o.email.trim())return void alert("Por favor, digite seu e-mail");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email))return void alert("Por favor, digite um e-mail válido");s(e.id,{name:o.name,email:o.email})}else if(1===e.id){const e="https://calendar.google.com/calendar/u/0/r/eventedit?text=Bootcamp+Programador+em+7+Dias+-+Aula+1&details=Link+da+call:+https://us06web.zoom.us/j/87985750737?pwd=IY4s28M2H02QTVCBDOcsKFb2Nb1wF1.1&location=https://us06web.zoom.us/j/87985750737?pwd=IY4s28M2H02QTVCBDOcsKFb2Nb1wF1.1&dates=20250819T230000Z/20250820T010000Z";window.open(e,"_blank")}else if(2===e.id){const e="https://sndflw.com/i/bootcamp-programador-com-ia-em-7-dias-i";window.open(e,"_blank")}else if(3===e.id){if(!b)return void alert("Por favor, confirme que você baixou o Zoom e testou áudio/vídeo");s(e.id)}else if(4===e.id){if(!Object.values(A).every(e=>e))return void alert("Por favor, confirme todos os itens necessários");s(e.id)}else if(5===e.id){if(null===O)return;s(e.id)}else if(6===e.id){if(null===P)return;s(e.id)}else if(7===e.id)return void Q();D()}},disabled:!t||n,className:`relative w-full p-3 md:p-4 rounded-xl border-2 transition-all duration-300 ${n?"bg-primary/20 border-primary text-primary cursor-default":t?`${e.color}/20 border-${e.color.split("-")[1]}-500 hover:${e.color}/30 text-text-light cursor-pointer`:"bg-gray-500/10 border-gray-500/30 text-gray-500 cursor-not-allowed"} ${r?"ring-2 ring-primary/50":""}`,children:[n&&f.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:f.jsx("svg",{className:"w-4 h-4 text-background",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"text-2xl",children:e.icon}),f.jsxs("div",{className:"flex-1 text-left",children:[f.jsx("h3",{className:"font-semibold text-lg",style:{fontFamily:"var(--font-sans)"},children:e.title}),f.jsx("p",{className:"text-sm opacity-80 mb-2",children:e.description}),f.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium "+(n?"bg-primary/20 text-primary":"bg-white/10 text-current"),children:n?"✅ Concluído":e.buttonText})]})]})]}),[o.name,o.email,b,A,O,P,s,D,Q]),ne=e.useMemo(()=>{const e=H[t],i=f.jsx("div",{className:"mb-4 p-4 glass-card",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Nome Completo *"}),f.jsx(sl,{value:o.name,onChange:G,placeholder:"Digite seu nome completo"}),f.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Este nome aparecerá no seu ingresso personalizado"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"E-mail *"}),f.jsx("input",{type:"email",value:o.email,onChange:K,placeholder:"E-mail que você realizou a compra do ingresso",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-text-light placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary/50",required:!0}),f.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Digite o mesmo e-mail usado na compra do ingresso"})]}),!ee(0)&&f.jsx("div",{className:"text-center",children:f.jsxs(ol,{onClick:()=>{if(o.name.trim()&&o.email.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email))return void alert("Por favor, digite um e-mail válido");s(0,{name:o.name,email:o.email}),D(),z(!0)}else alert("Por favor, preencha todos os campos")},disabled:!o.name.trim()||!o.email.trim(),className:o.name.trim()&&o.email.trim()?"bg-primary hover:bg-primary-light text-white":"bg-gray-500/50 text-gray-400 cursor-not-allowed",children:["Confirmo que sou ",o.name||"[NOME]"]})})]})});if(ee(0)&&!ee(1)){const e="https://calendar.google.com/calendar/u/0/r/eventedit?text=Bootcamp+Programador+em+7+Dias+-+Aula+1&details=Link+da+call:+https://us06web.zoom.us/j/87985750737?pwd=IY4s28M2H02QTVCBDOcsKFb2Nb1wF1.1&location=https://us06web.zoom.us/j/87985750737?pwd=IY4s28M2H02QTVCBDOcsKFb2Nb1wF1.1&dates=20250819T230000Z/20250820T010000Z",t=f.jsx("div",{className:"mb-4 p-6 glass-card",children:f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h4",{className:"text-lg font-semibold text-text-light mb-2",children:"📅 Adicionar na Agenda"}),U&&q>0?f.jsx("div",{className:"space-y-4",children:f.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-6",children:f.jsxs("div",{className:"text-center space-y-3",children:[f.jsx("div",{className:"text-4xl animate-pulse",children:"⏰"}),f.jsx("p",{className:"text-text-light font-medium",children:"Adicione o evento a sua agenda"}),f.jsx("div",{className:"text-3xl font-bold text-primary",children:q}),f.jsx("p",{className:"text-text-muted text-sm",children:"Redirecionando automaticamente..."})]})})}):f.jsxs(f.Fragment,{children:[f.jsx("p",{className:"text-text-muted text-sm mb-7",children:"O link do Google Calendar foi aberto em uma nova aba"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(al,{id:"calendar-checkbox",checked:S,onChange:e=>I(e.target.checked),label:"Já adicionei a Aula 1 na minha agenda"}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-text-muted text-sm mb-2",children:"Link do Convite:"}),f.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary-light underline text-sm",children:"Abrir Google Calendar novamente"})]}),f.jsx("div",{className:"text-center",children:f.jsx(ol,{onClick:()=>{S?(s(1),D()):alert("Por favor, confirme que você adicionou o evento na sua agenda")},disabled:!S,className:S?"bg-primary hover:bg-primary-light text-white":"bg-gray-500/50 text-gray-400 cursor-not-allowed",children:"Continuar"})})]})]})]})})});return f.jsxs("div",{className:"space-y-4",children:[i,t]})}if(!ee(0))return i;if(2===e.id&&!ee(2))return f.jsx(_,{onComplete:()=>s(2),playSuccessSound:D,isActive:!0});if(3===e.id&&!ee(3))return f.jsx("div",{className:"mb-4 p-6 glass-card",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h4",{className:"text-lg font-semibold text-text-light mb-2",children:"📹 Configure o Zoom"}),f.jsx("p",{className:"text-text-muted text-sm",children:"Para participar das aulas ao vivo, você precisa ter o Zoom instalado e testado"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-4",children:[f.jsx("h5",{className:"font-medium text-text-light mb-3",children:"Passos necessários:"}),f.jsx("div",{className:"space-y-3",children:["Baixar o Zoom (gratuito)","Criar uma conta no Zoom","Testar microfone e câmera","Verificar se o áudio está funcionando"].map((e,t)=>f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-5 h-5 rounded bg-primary/20 flex items-center justify-center",children:f.jsx("span",{className:"text-xs text-primary",children:t+1})}),f.jsx("span",{className:"text-text-light text-sm",children:e})]},t))})]}),f.jsx(al,{id:"zoom-checkbox",checked:b,onChange:e=>w(e.target.checked),label:"Zoom configurado e testado"}),f.jsx("div",{className:"text-center",children:f.jsx(ol,{onClick:()=>{b?(s(3),D()):alert("Por favor, confirme que você baixou o Zoom e testou áudio/vídeo")},disabled:!b,className:b?"bg-primary hover:bg-primary-light text-white":"bg-gray-500/50 text-gray-400 cursor-not-allowed",children:"Continuar"})})]})]})});if(4===e.id&&!ee(4))return f.jsx("div",{className:"mb-4 p-6 glass-card",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h4",{className:"text-lg font-semibold text-text-light mb-2",children:"💻 Prepare seu Ambiente"}),f.jsx("p",{className:"text-text-muted text-sm",children:"Marque todos os itens que você tem disponível para o bootcamp"})]}),f.jsx("div",{className:"space-y-3",children:[{key:"computer",label:"Computador ou notebook funcionando",icon:"💻"},{key:"paper",label:"Papel para anotações",icon:"📄"},{key:"pen",label:"Caneta para escrever",icon:"✏️"},{key:"quietPlace",label:"Local tranquilo para assistir",icon:"🏠"},{key:"internet",label:"Conexão de internet estável",icon:"🌐"}].map(e=>f.jsx(al,{id:`equipment-${e.key}`,checked:A[e.key],onChange:t=>k(n=>({...n,[e.key]:t.target.checked})),label:`${e.icon} ${e.label}`},e.key))}),f.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-4",children:f.jsxs("p",{className:"text-text-light text-sm",children:[f.jsx("strong",{children:"💡 Dica:"})," Ter todos esses itens prontos vai garantir que você aproveite ao máximo o bootcamp!"]})}),f.jsx("div",{className:"text-center",children:f.jsx(ol,{onClick:()=>{Object.values(A).every(e=>e)?(s(4),D()):alert("Por favor, confirme todos os itens necessários")},disabled:!Object.values(A).every(e=>e),className:Object.values(A).every(e=>e)?"bg-primary hover:bg-primary-light text-white":"bg-gray-500/50 text-gray-400 cursor-not-allowed",children:"Continuar"})})]})});if(5===e.id&&!ee(5)){if(null===O)return f.jsx("div",{className:"mb-4 p-6 glass-card",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h4",{className:"text-lg font-semibold text-text-light mb-2",children:"🎥 Gravação Vitalícia do Evento"}),f.jsx("p",{className:"text-text-muted text-sm",children:"Garanta acesso vitalício às gravações completas do bootcamp"})]}),f.jsx("div",{className:"bg-gradient-to-r from-green-500/20 to-green-600/20 border border-green-500/30 rounded-xl p-6",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"text-4xl",children:"🎥"}),f.jsx("h5",{className:"text-xl font-bold text-text-light",children:"O que você vai receber:"}),f.jsxs("ul",{className:"text-text-light text-sm space-y-2",children:[f.jsx("li",{children:"✅ Gravações completas de todas as aulas"}),f.jsx("li",{children:"✅ Acesso vitalício (para sempre)"}),f.jsx("li",{children:"✅ Qualidade HD"}),f.jsx("li",{children:"✅ Possibilidade de assistir quantas vezes quiser"}),f.jsx("li",{children:"✅ Ideal para revisar o conteúdo"})]})]})}),f.jsxs("div",{className:"flex gap-4 justify-center",children:[f.jsx(ol,{onClick:()=>X("yes"),className:"bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition-colors duration-200",children:"✅ SIM, quero a gravação"}),f.jsx(ol,{onClick:()=>X("no"),className:"bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition-colors duration-200",children:"❌ NÃO, obrigado"})]})]})});if("no"===O||"yes"===O)return f.jsx("div",{className:"mb-4 p-6 glass-card",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-text-muted text-sm mb-4",children:"Confirme sua decisão:"}),"yes"===O&&f.jsx("div",{className:"mb-4",children:f.jsx("a",{href:"https://pay.assiny.com.br/38ca3c/node/97708J",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded-lg transition-colors duration-200",children:"💳 Quero a gravação (ir para checkout)"})})]}),f.jsxs("div",{className:"space-y-3",style:{position:"relative",zIndex:100},children:[f.jsx("div",{className:"p-4 rounded-lg transition-all duration-200 cursor-pointer border-2 "+(M.noThanks?"bg-blue-500/20 border-blue-500/50":"bg-white/10 border-white/20 hover:bg-white/20"),style:{minHeight:"60px",userSelect:"none",position:"relative",zIndex:101},onClick:()=>{L({noThanks:!0,alreadyHave:!1})},children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("input",{type:"radio",name:"recording-option",checked:M.noThanks,onChange:()=>{L({noThanks:!0,alreadyHave:!1})},style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#3B82F6",pointerEvents:"auto"},className:"cursor-pointer"}),f.jsx("span",{className:"text-text-light text-sm flex-1 leading-relaxed",children:"Confirmo que quero fazer o check-in e NÃO quero aproveitar a oportunidade de ter a gravação vitalícia"})]})}),f.jsx("div",{className:"p-4 rounded-lg transition-all duration-200 cursor-pointer border-2 "+(M.alreadyHave?"bg-blue-500/20 border-blue-500/50":"bg-white/10 border-white/20 hover:bg-white/20"),style:{minHeight:"60px",userSelect:"none",position:"relative",zIndex:101},onClick:()=>{L({noThanks:!1,alreadyHave:!0})},children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("input",{type:"radio",name:"recording-option",checked:M.alreadyHave,onChange:()=>{L({noThanks:!1,alreadyHave:!0})},style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#3B82F6",pointerEvents:"auto"},className:"cursor-pointer"}),f.jsx("span",{className:"text-text-light text-sm flex-1 leading-relaxed",children:"SIM (Já garanti a gravação vitalícia)"})]})})]}),f.jsx("div",{className:"text-center space-y-3",children:f.jsx(ol,{onClick:()=>{if(M.noThanks||M.alreadyHave){let e=O;M.noThanks?e="no_thanks":M.alreadyHave&&(e="already_purchased"),l(t=>({...t,recordingResponse:e})),s(5),D()}else alert("Por favor, selecione uma das opções")},disabled:!M.noThanks&&!M.alreadyHave,className:"font-semibold rounded-lg transition-colors duration-200 "+(M.noThanks||M.alreadyHave?"bg-primary hover:bg-primary-light text-white cursor-pointer":"bg-gray-500/50 text-gray-400 cursor-not-allowed"),children:"Continuar"})})]})})}if(6===e.id&&!ee(6)){if(null===P)return f.jsx("div",{className:"mb-4 p-6 glass-card",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h4",{className:"text-lg font-semibold text-text-light mb-2",children:"💻 Código Completo do Projeto"}),f.jsx("p",{className:"text-text-muted text-sm",children:"Tenha acesso ao código completo da aplicação desenvolvida"})]}),f.jsx("div",{className:"bg-gradient-to-r from-emerald-500/20 to-emerald-600/20 border border-emerald-500/30 rounded-xl p-6",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"text-4xl",children:"💻"}),f.jsx("h5",{className:"text-xl font-bold text-text-light",children:"O que você vai receber:"}),f.jsxs("ul",{className:"text-text-light text-sm space-y-2",children:[f.jsx("li",{children:"✅ Código completo da aplicação"}),f.jsx("li",{children:"✅ Todos os arquivos do projeto"}),f.jsx("li",{children:"✅ Documentação detalhada"}),f.jsx("li",{children:"✅ Instruções de instalação"}),f.jsx("li",{children:"✅ Acesso vitalício ao código"})]})]})}),f.jsxs("div",{className:"flex gap-4 justify-center",children:[f.jsx(ol,{onClick:()=>J("yes"),className:"bg-emerald-500 hover:bg-emerald-600 text-white font-semibold rounded-lg transition-colors duration-200",children:"✅ SIM, quero o código"}),f.jsx(ol,{onClick:()=>J("no"),className:"bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition-colors duration-200",children:"❌ NÃO, obrigado"})]})]})});if("no"===P||"yes"===P)return f.jsx("div",{className:"mb-4 p-6 glass-card",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-text-muted text-sm mb-4",children:"Confirme sua decisão:"}),"yes"===P&&f.jsx("div",{className:"mb-4",children:f.jsx("a",{href:"https://pay.assiny.com.br/de8237/node/242143",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-emerald-500 hover:bg-emerald-600 text-white font-semibold px-4 py-2 rounded-lg transition-colors duration-200",children:"💳 Quero o código (ir para checkout)"})})]}),f.jsxs("div",{className:"space-y-3",style:{position:"relative",zIndex:100},children:[f.jsx("div",{className:"p-4 rounded-lg transition-all duration-200 cursor-pointer border-2 "+(F.noThanks?"bg-blue-500/20 border-blue-500/50":"bg-white/10 border-white/20 hover:bg-white/20"),style:{minHeight:"60px",userSelect:"none",position:"relative",zIndex:101},onClick:()=>{B({noThanks:!0,alreadyHave:!1})},children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("input",{type:"radio",name:"code-option",checked:F.noThanks,onChange:()=>{B({noThanks:!0,alreadyHave:!1})},style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#3B82F6",pointerEvents:"auto"},className:"cursor-pointer"}),f.jsx("span",{className:"text-text-light text-sm flex-1 leading-relaxed",children:"Confirmo que quero fazer o check-in e NÃO quero aproveitar a oportunidade de ter o código completo"})]})}),f.jsx("div",{className:"p-4 rounded-lg transition-all duration-200 cursor-pointer border-2 "+(F.alreadyHave?"bg-blue-500/20 border-blue-500/50":"bg-white/10 border-white/20 hover:bg-white/20"),style:{minHeight:"60px",userSelect:"none",position:"relative",zIndex:101},onClick:()=>{B({noThanks:!1,alreadyHave:!0})},children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("input",{type:"radio",name:"code-option",checked:F.alreadyHave,onChange:()=>{B({noThanks:!1,alreadyHave:!0})},style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#3B82F6",pointerEvents:"auto"},className:"cursor-pointer"}),f.jsx("span",{className:"text-text-light text-sm flex-1 leading-relaxed",children:"SIM (Já garanti o código completo)"})]})})]}),f.jsx("div",{className:"text-center space-y-3",children:f.jsx(ol,{onClick:()=>{if(F.noThanks||F.alreadyHave){let e=P;F.noThanks?e="no_thanks":F.alreadyHave&&(e="already_purchased"),l(t=>({...t,codeResponse:e})),s(6),D()}else alert("Por favor, selecione uma das opções")},disabled:!F.noThanks&&!F.alreadyHave,className:"font-semibold rounded-lg transition-colors duration-200 "+(F.noThanks||F.alreadyHave?"bg-primary hover:bg-primary-light text-white cursor-pointer":"bg-gray-500/50 text-gray-400 cursor-not-allowed"),children:"Continuar"})})]})})}return 7!==e.id||ee(7)?9===n.length?f.jsxs(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mt-8 p-6 bg-gradient-to-r from-primary/20 to-primary-light/20 rounded-xl border border-primary/30 text-center",children:[f.jsx("div",{className:"text-4xl mb-4",children:"🎉"}),f.jsx("h3",{className:"text-2xl font-bold text-primary mb-2",style:{fontFamily:"var(--font-chakra-petch), system-ui, sans-serif"},children:"Parabéns!"}),f.jsx("p",{className:"text-text-light mb-6",children:"Seu check-in foi realizado com sucesso! Você receberá um e-mail de confirmação em breve."}),f.jsx(ol,{onClick:a,className:"btn-primary px-8 py-3",children:"✨ Gerar Ingresso Personalizado"})]}):null:f.jsx("div",{className:"mb-4 p-6 glass-card",children:f.jsxs("div",{className:"text-center space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h4",{className:"text-lg font-semibold text-text-light",children:"📸 Adicione sua foto (opcional)"}),f.jsx("div",{onClick:()=>{var e;return null==(e=j.current)?void 0:e.click()},className:"border-2 border-dashed border-primary/30 hover:border-primary/50 rounded-xl p-8 cursor-pointer transition-all duration-300 group",children:c?f.jsxs("div",{className:"space-y-4",children:[f.jsx("img",{src:c,alt:"Preview",className:"w-32 h-32 object-cover rounded-full mx-auto border-4 border-primary/30"}),f.jsx("p",{className:"text-text-muted",children:"Clique para trocar a foto"})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"text-4xl group-hover:scale-110 transition-transform duration-300",children:"📷"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-text-light font-medium",children:"Clique para adicionar sua foto"}),f.jsx("p",{className:"text-sm text-text-muted mt-2",children:"JPG, PNG até 5MB • Opcional"})]})]})}),f.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:W,className:"hidden"})]}),f.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-4",children:f.jsxs("p",{className:"text-text-light text-sm",children:[f.jsx("strong",{children:"Seu ingresso terá:"}),f.jsx("br",{}),"• Seu nome: ",f.jsx("span",{className:"text-primary",children:o.name}),f.jsx("br",{}),"• ID único personalizado",f.jsx("br",{}),"• Design exclusivo DevClub",f.jsx("br",{}),"• Ideal para compartilhar nas redes sociais"]})}),f.jsx("div",{className:"text-center",children:f.jsx(ol,{onClick:Q,className:"bg-primary hover:bg-primary-light text-white font-semibold rounded-lg transition-colors duration-200",children:"Gerar Meu Ingresso"})})]})})},[t,H,o.name,o.email,S,ee,G,K,s,D,b,A,O,P,c,W,Q,X,J,R,V,M,L,F,B,a,U,q]);return f.jsxs("div",{className:"space-y-4 md:space-y-6",children:[ne,H.map(e=>f.jsx("div",{children:f.jsx(te,{step:e,isAccessible:Z(e.id),isCompleted:ee(e.id),isCurrent:t===e.id})},e.id)),f.jsx(C,{name:o.name,photo:c,onCredentialGenerated:Y,shouldGenerate:v}),f.jsx(E,{isOpen:g,onClose:()=>y(!1),credentialImage:u,ticketId:m,userName:o.name})]})}),cl=({isOpen:t,onClose:n})=>{const[s,a]=e.useState(0),[o,l]=e.useState([]),[c,h]=e.useState({name:"",email:""});e.useEffect(()=>{const e=e=>{"Escape"===e.key&&n()};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,n]);const u=e=>["Confirmar Dados","Adicionar ao Calendário","Entrar no WhatsApp","Configurar Zoom","Preparar Ambiente","Gerar Ingresso","Gravação Vitalícia","Código Completo"][e]||`Etapa ${e+1}`,d=()=>{"undefined"!=typeof fbq&&fbq("track","CustomEvent",{event_name:"CheckinModalClose",steps_completed:o.length,content_name:"Check-in Bootcamp Programador em 7 Dias"}),a(0),l([]),h({name:"",email:""}),n()};return t?f.jsx(i,{children:f.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[f.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:d}),f.jsx(r.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.4,ease:"easeOut"},className:"relative w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto scrollbar-hide",onClick:e=>e.stopPropagation(),children:f.jsxs("div",{className:"glass-card p-4 md:p-8 relative",children:[f.jsx("button",{onClick:d,className:"absolute top-4 right-4 w-12 h-12 md:w-10 md:h-10 flex items-center justify-center rounded-full bg-red-500/20 hover:bg-red-500/30 border-2 border-red-500/30 transition-all duration-200 group z-10",children:f.jsx("svg",{className:"w-6 h-6 md:w-5 md:h-5 text-red-400 group-hover:text-red-300 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),f.jsxs(r.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[f.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-text-light mb-2",style:{fontFamily:"var(--font-chakra-petch), system-ui, sans-serif"},children:["🚀 ",f.jsx("span",{className:"text-gradient",children:"Check-in Interativo"})]}),f.jsx("p",{className:"text-text-muted text-lg",children:"Complete as 8 etapas para confirmar sua presença no bootcamp"})]}),f.jsxs(r.div,{initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},transition:{delay:.4,duration:.8},className:"mb-8",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("span",{className:"text-sm text-text-muted",children:"Progresso"}),f.jsxs("span",{className:"text-sm text-primary font-semibold",children:[o.length,"/8 concluídas"]})]}),f.jsx("div",{className:"h-2 bg-secondary/50 rounded-full overflow-hidden",children:f.jsx(r.div,{initial:{width:0},animate:{width:o.length/8*100+"%"},transition:{duration:.5,ease:"easeOut"},className:"h-full bg-gradient-to-r from-primary to-primary-light"})})]}),f.jsx(ll,{currentStep:s,completedSteps:o,userData:c,onStepComplete:(e,t={})=>{o.includes(e)||(l(t=>[...t,e]),"undefined"!=typeof fbq&&fbq("track","CustomEvent",{event_name:"CheckinStepComplete",step_number:e+1,step_name:u(e),content_name:"Check-in Bootcamp Programador em 7 Dias"})),t&&h(e=>({...e,...t})),e===s&&e<7&&setTimeout(()=>{a(e+1)},500)},onClose:d}),f.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-2xl",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-2xl"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-purple-500/5 rounded-full blur-2xl"})]})]})})]})}):null},hl=({isCheckinModalOpen:t,setIsCheckinModalOpen:n})=>{const[i,s]=e.useState(!1);e.useEffect(()=>{const e=setTimeout(()=>{s(!0)},1500);return()=>clearTimeout(e)},[]);const a=()=>{n(!0)};return f.jsxs("section",{className:"relative min-h-screen flex items-center justify-center px-4 py-20",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-radial opacity-50"}),f.jsx(r.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:1,duration:.8},className:"badge-float",children:f.jsx("span",{className:"text-glow",style:{fontFamily:"var(--font-sans)"},children:"✨ 90% confirmados"})}),f.jsxs("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-2 gap-12 lg:gap-20 items-center",children:[f.jsxs(r.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},className:"space-y-6 lg:space-y-8 text-center lg:text-left",children:[f.jsxs(r.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5,duration:.6},className:"inline-flex items-center gap-2 bg-red-500/20 backdrop-blur-sm px-4 py-2 rounded-full border border-red-500/30",children:[f.jsx("span",{className:"text-2xl animate-pulse",children:"🚨"}),f.jsx("span",{className:"text-red-400 font-medium",style:{fontFamily:"var(--font-sans)"},children:"FALTA POUCO!"})]}),f.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[f.jsx("div",{style:{fontFamily:"var(--font-chakra-petch), system-ui, sans-serif"},children:f.jsx(w,{text:"O Bootcamp Programador em 7 Dias está chegando",className:"text-3xl md:text-4xl lg:text-6xl font-bold text-text-light leading-tight",delay:.8})}),f.jsxs(r.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:2.5,duration:.8},className:"text-lg md:text-xl lg:text-2xl text-text-muted",style:{fontFamily:"var(--font-chakra-petch), system-ui, sans-serif"},children:["Você precisa confirmar sua presença"," ",f.jsx("span",{className:"text-primary font-semibold text-glow",children:"AGORA"})]})]}),i&&f.jsx(r.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.4,ease:"easeOut"},className:"flex justify-center lg:hidden",children:f.jsx("button",{onClick:a,className:"btn-primary btn-pulse text-xl md:text-2xl px-12 py-6 font-bold uppercase tracking-wide w-full max-w-md",style:{fontFamily:"var(--font-sans)"},children:f.jsxs("span",{className:"flex items-center justify-center gap-3",children:[f.jsx("span",{children:"🚀"}),f.jsx("span",{children:"INICIAR CHECK-IN"})]})})}),f.jsx(r.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1,duration:.6},className:"lg:scale-100 scale-90",children:f.jsx(x,{targetDate:"2025-08-19T20:00:00"})}),f.jsxs(r.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.6},className:"text-lg md:text-xl text-text-muted max-w-2xl",style:{fontFamily:"var(--font-chakra-petch), system-ui, sans-serif"},children:[f.jsxs("span",{className:"hidden lg:inline",children:["🎯 Confirme sua presença e garanta sua vaga no Bootcamp que já transformou a vida de"," ",f.jsx("span",{className:"text-primary font-semibold",children:"milhares de pessoas"})]}),f.jsxs("span",{className:"lg:hidden",children:["🎯 Garante sua vaga no Bootcamp que já transformou ",f.jsx("span",{className:"text-primary font-semibold",children:"milhares de vidas"})]})]}),f.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.4,duration:.6},className:"bg-yellow-500/10 backdrop-blur-sm border border-yellow-500/30 rounded-xl p-3 lg:p-4",children:f.jsxs("p",{className:"text-yellow-400 font-medium flex items-start lg:items-center gap-2 text-sm lg:text-base",style:{fontFamily:"var(--font-sans)"},children:[f.jsx("span",{className:"text-lg lg:text-xl flex-shrink-0",children:"⚠️"}),f.jsxs("span",{children:[f.jsx("strong",{children:"ATENÇÃO:"})," ",f.jsx("span",{className:"hidden lg:inline",children:"O check-in é OBRIGATÓRIO e deve ser feito até"}),f.jsx("span",{className:"lg:hidden",children:"Check-in até"})," segunda-feira, dia 19 de agosto, às 18h."]})]})})]}),f.jsxs(r.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:.5,duration:.8,ease:"easeOut"},className:"relative space-y-6 lg:-mt-16 mt-8 lg:mt-0",children:[f.jsx(b,{}),i&&f.jsx(r.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.4,ease:"easeOut"},className:"hidden lg:flex lg:justify-end",children:f.jsx("button",{onClick:a,className:"btn-primary btn-pulse text-xl md:text-2xl px-12 py-6 font-bold uppercase tracking-wide w-auto",style:{fontFamily:"var(--font-sans)"},children:f.jsxs("span",{className:"flex items-center justify-center gap-3",children:[f.jsx("span",{children:"🚀"}),f.jsx("span",{children:"INICIAR CHECK-IN"})]})})}),f.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:2.5,duration:.8},className:"hidden lg:block lg:max-w-sm lg:ml-auto",children:f.jsxs("div",{className:"terminal-window",children:[f.jsxs("div",{className:"terminal-header",children:[f.jsx("div",{className:"terminal-dot red"}),f.jsx("div",{className:"terminal-dot yellow"}),f.jsx("div",{className:"terminal-dot green"}),f.jsx("span",{className:"text-sm text-gray-400 ml-4",children:"bootcamp-checkin.js"})]}),f.jsxs("div",{className:"p-4 space-y-2",children:[f.jsx("div",{className:"text-green-400 font-mono text-sm",children:"$ npm run start-journey"}),f.jsxs("div",{className:"text-primary font-mono text-sm",children:[">"," Iniciando transformação..."]}),f.jsxs("div",{className:"text-text-muted font-mono text-sm",children:[">"," Carregando oportunidades..."]}),f.jsxs("div",{className:"text-primary font-mono text-sm animate-pulse",children:[">"," Aguardando check-in_"]})]})]})})]})]}),f.jsx(r.div,{initial:{opacity:0},animate:{opacity:.3},transition:{delay:3,duration:1},className:"absolute top-20 right-20 hidden xl:block",children:f.jsxs("div",{className:"font-mono text-sm text-primary space-y-1",children:[f.jsx("div",{children:"<programmer>"}),f.jsx("div",{className:"ml-4",children:'const future = "dev";'}),f.jsxs("div",{className:"ml-4",children:["if (checkin) ","{"]}),f.jsx("div",{className:"ml-8",children:"career.transform();"}),f.jsx("div",{className:"ml-4",children:"}"}),f.jsx("div",{children:"</programmer>"})]})}),f.jsx(cl,{isOpen:t,onClose:()=>{n(!1)}})]})},ul=()=>{const[t,n]=e.useState(!1),[i,s]=e.useState(!1);e.useEffect(()=>{const e=()=>{n(window.innerWidth<=768||"ontouchstart"in window),s(window.matchMedia("(prefers-reduced-motion: reduce)").matches)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const a=['const career = "dev";',"function transform() {","if (checkin) {","return success;","}","const bootcamp = new Experience();","async function learn() {","await bootcamp.start();","class Programmer {","constructor() {","this.skills = [];","npm install future",'git commit -m "new life"','import { success } from "./bootcamp"',"export default Career;","<developer>","</developer>","// TODO: Change life","/* Start here */","boolean isReady = true;","let dreams = reality;","=> transform()"],o=e.useMemo(()=>{if(i)return[];const e=navigator.deviceMemory<4||navigator.hardwareConcurrency<4,n="undefined"!=typeof window?window.innerWidth:1200;let r;return r=e?6:t?8:20,Array.from({length:r},(e,r)=>({id:r,code:a[Math.floor(Math.random()*a.length)],initialX:Math.random()*n,delay:Math.random()*(t?10:15),duration:(t?8:12)+8*Math.random(),size:.7+.6*Math.random(),opacity:(t?.15:.25)+.3*Math.random()}))},[t,i]);return f.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden z-0",children:[o.map(e=>f.jsx(r.div,{initial:{x:e.initialX,y:"-10vh",opacity:0,scale:e.size},animate:{x:e.initialX+30*Math.sin(3e-4*Date.now()+e.id),y:"100vh",opacity:[0,e.opacity,e.opacity,0],scale:[e.size,1.1*e.size,e.size]},transition:{duration:e.duration,delay:e.delay,repeat:1/0,ease:"linear"},className:"absolute font-mono text-primary select-none",style:{fontSize:.6+.4*Math.random()+"rem",filter:t?"none":`blur(${2*Math.random()}px)`,willChange:"transform",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:e.code},e.id)),!i&&Array.from({length:t?4:10},(e,n)=>{const i="undefined"!=typeof window?window.innerWidth:1200;return f.jsx(r.div,{initial:{x:Math.random()*i,y:"-10vh",opacity:0},animate:{x:Math.random()*i+20*Math.sin(2e-4*Date.now()+n),y:"100vh",opacity:[0,t?.08:.1,t?.08:.1,0]},transition:{duration:(t?10:12)+8*Math.random(),delay:Math.random()*(t?12:15),repeat:1/0,ease:"linear"},className:"absolute text-primary/20 select-none pointer-events-none",style:{fontSize:(t?.8:1+2*Math.random())+"rem",willChange:"transform",transform:"translateZ(0)"},children:["</","/>","{}","()","[]","=>","&&","||","++","--"][Math.floor(10*Math.random())]},`symbol-${n}`)}),!i&&Array.from({length:t?3:8},(e,n)=>{const i="undefined"!=typeof window?window.innerWidth:1200,s="undefined"!=typeof window?window.innerHeight:800;return f.jsx(r.div,{initial:{x:Math.random()*i,y:-50,opacity:0},animate:{x:Math.random()*i+15*Math.sin(1e-4*Date.now()+n),y:s+50,opacity:[0,t?.08:.1,t?.08:.1,0]},transition:{duration:(t?15:20)+10*Math.random(),delay:Math.random()*(t?15:20),repeat:1/0,ease:"linear"},className:"absolute border border-primary/20 select-none pointer-events-none",style:{width:15+Math.random()*(t?20:30)+"px",height:15+Math.random()*(t?20:30)+"px",borderRadius:Math.random()>.5?"50%":"4px",willChange:"transform",transform:"translateZ(0)"}},`shape-${n}`)})]})},dl=()=>{const[t,n]=e.useState(!1),[i,s]=e.useState(!1);e.useEffect(()=>{const e=()=>{n(window.innerWidth<=768||"ontouchstart"in window),s(window.matchMedia("(prefers-reduced-motion: reduce)").matches)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const a=navigator.deviceMemory<4||navigator.hardwareConcurrency<4,o=[{id:1,size:t?200:a?300:400,x:"10%",y:"20%",delay:0,duration:t?10:a?12:8,color:"primary"},{id:2,size:t?150:a?250:300,x:"80%",y:"60%",delay:2,duration:t?12:a?15:10,color:"primary-light"},...t||a?[]:[{id:3,size:250,x:"60%",y:"10%",delay:4,duration:12,color:"primary-dark"},{id:4,size:350,x:"20%",y:"70%",delay:1,duration:9,color:"primary"},{id:5,size:200,x:"90%",y:"30%",delay:3,duration:7,color:"primary-light"}]],l=e=>{switch(e){case"primary":default:return"bg-primary/10";case"primary-light":return"bg-primary-light/8";case"primary-dark":return"bg-primary-dark/12"}};return i?f.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden -z-10",children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-primary-light/5"})}):f.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden -z-10",children:[o.map(e=>f.jsx(r.div,{initial:{x:e.x,y:e.y,scale:0,opacity:0},animate:t?{scale:[.9,1.1,.9],opacity:[0,.3,.2,.3]}:{scale:[.8,1.2,.9,1],opacity:[0,.6,.4,.6],rotate:[0,180,360]},transition:{duration:e.duration,delay:e.delay,repeat:1/0,ease:"easeInOut"},className:`absolute rounded-full blur-3xl ${l(e.color)}`,style:{width:`${e.size}px`,height:`${e.size}px`,filter:`blur(${t?40:60}px)`,willChange:"transform, opacity",transform:"translateZ(0)",backfaceVisibility:"hidden"}},e.id)),!t&&f.jsxs(f.Fragment,{children:[f.jsx(r.div,{animate:{scale:[1,1.3,1],opacity:[.1,.3,.1]},transition:{duration:15,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-r from-primary/20 to-purple-500/20 rounded-full blur-3xl",style:{transform:"translateZ(0)",backfaceVisibility:"hidden"}}),f.jsx(r.div,{animate:{scale:[1.2,.8,1.2],opacity:[.2,.1,.2]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:3},className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-gradient-to-l from-primary-light/20 to-cyan-500/20 rounded-full blur-3xl",style:{transform:"translateZ(0)",backfaceVisibility:"hidden"}})]}),f.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid "+(t?"opacity-10":"opacity-30")}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-background via-transparent to-background opacity-80"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background via-transparent to-background opacity-60"})]})},ml=e.lazy(()=>v(()=>import("./ScheduleSection-63e71972.js"),["assets/ScheduleSection-63e71972.js","assets/vendor-79b9f383.js","assets/animations-f7009316.js"])),fl=e.lazy(()=>v(()=>import("./FirstClassSection-ddf14c6b.js"),["assets/FirstClassSection-ddf14c6b.js","assets/vendor-79b9f383.js","assets/animations-f7009316.js"])),pl=e.lazy(()=>v(()=>import("./UrgencySection-393d99d4.js"),["assets/UrgencySection-393d99d4.js","assets/vendor-79b9f383.js","assets/animations-f7009316.js"])),gl=e.lazy(()=>v(()=>import("./FAQSection-82986420.js"),["assets/FAQSection-82986420.js","assets/vendor-79b9f383.js","assets/animations-f7009316.js"])),yl=e.lazy(()=>v(()=>import("./Footer-9f44ea35.js"),["assets/Footer-9f44ea35.js","assets/vendor-79b9f383.js","assets/animations-f7009316.js"])),vl=e.lazy(()=>v(()=>import("./WhatsAppButton-b4a562dd.js"),["assets/WhatsAppButton-b4a562dd.js","assets/vendor-79b9f383.js","assets/animations-f7009316.js"]));function xl(){const[t,n]=e.useState(!1),[i,s]=e.useState(!1),a=()=>{"undefined"!=typeof fbq&&fbq("track","CustomEvent",{event_name:"CheckinModalOpen",content_name:"Check-in Bootcamp Programador em 7 Dias"}),s(!0)};e.useEffect(()=>{const e=window.innerWidth<=768,t=navigator.deviceMemory<4||navigator.hardwareConcurrency<4,r=setTimeout(()=>{n(!0)},e||t?300:500);return()=>clearTimeout(r)},[]),e.useEffect(()=>{let e=!1;const t=window.innerWidth<=768,n=navigator.deviceMemory<4||navigator.hardwareConcurrency<4;if(t||n)return;const r=()=>{e||(requestAnimationFrame(()=>{const t=-.5*window.pageYOffset;document.querySelectorAll(".parallax").forEach(e=>{e.style.transform=`translate3d(0, ${t}px, 0)`}),e=!1}),e=!0)};return window.addEventListener("scroll",r,{passive:!0}),()=>window.removeEventListener("scroll",r)},[]);const o=({height:e="200px"})=>f.jsx("div",{className:"flex items-center justify-center",style:{height:e},children:f.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})});return f.jsxs("div",{className:"min-h-screen bg-background overflow-x-hidden",children:[f.jsx("div",{className:"fixed inset-0 grid-bg pointer-events-none"}),f.jsx(dl,{}),f.jsx(ul,{}),f.jsxs(r.main,{initial:{opacity:0},animate:{opacity:t?1:0},transition:{duration:.8,ease:"easeOut"},className:"relative z-10",children:[f.jsx(hl,{isCheckinModalOpen:i,setIsCheckinModalOpen:a}),f.jsx(e.Suspense,{fallback:f.jsx(o,{height:"400px"}),children:f.jsx(ml,{})}),f.jsx(e.Suspense,{fallback:f.jsx(o,{height:"300px"}),children:f.jsx(fl,{})}),f.jsx(e.Suspense,{fallback:f.jsx(o,{height:"350px"}),children:f.jsx(pl,{onOpenCheckin:a})}),f.jsx(e.Suspense,{fallback:f.jsx(o,{height:"500px"}),children:f.jsx(gl,{onOpenCheckin:a})})]}),f.jsx(e.Suspense,{fallback:f.jsx(o,{height:"400px"}),children:f.jsx(yl,{onOpenCheckin:()=>s(!0)})}),f.jsx(e.Suspense,{fallback:null,children:f.jsx(vl,{})}),f.jsx(cl,{isOpen:i,onClose:()=>s(!1)})]})}p.createRoot(document.getElementById("root")).render(f.jsx(n.StrictMode,{children:f.jsx(xl,{})}));export{f as j};
